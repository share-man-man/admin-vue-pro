import{w as E}from"./_Set.ed75c1de.js";import{G as b,Y as l}from"./debounce.63695ae7.js";import{d as g,k as S,n as A}from"./index.e1409c94.js";var m={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},u={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[],d=[];function k(){var i=document.createElement("div"),t=i.style;"AnimationEvent"in window||(delete m.animationstart.animation,delete u.animationend.animation),"TransitionEvent"in window||(delete m.transitionstart.transition,delete u.transitionend.transition);function n(e,o){for(var r in e)if(e.hasOwnProperty(r)){var c=e[r];for(var v in c)if(v in t){o.push(c[v]);break}}}n(m,s),n(u,d)}typeof window!="undefined"&&typeof document!="undefined"&&k();function h(i,t,n){i.addEventListener(t,n,!1)}function p(i,t,n){i.removeEventListener(t,n,!1)}var N={startEvents:s,addStartEventListener:function(t,n){if(s.length===0){window.setTimeout(n,0);return}s.forEach(function(e){h(t,e,n)})},removeStartEventListener:function(t,n){s.length!==0&&s.forEach(function(e){p(t,e,n)})},endEvents:d,addEndEventListener:function(t,n){if(d.length===0){window.setTimeout(n,0);return}d.forEach(function(e){h(t,e,n)})},removeEndEventListener:function(t,n){d.length!==0&&d.forEach(function(e){p(t,e,n)})}},f=N,a;function T(i){return!i||i.offsetParent===null}function x(i){var t=(i||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}var P=g({name:"Wave",props:["insertExtraNode"],setup:function(){var t=S("configProvider",b);return{configProvider:t}},mounted:function(){var t=this;A(function(){var n=l(t);n.nodeType===1&&(t.instance=t.bindAnimationEvent(n))})},beforeUnmount:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId)},methods:{onClick:function(t,n){if(!(!t||T(t)||t.className.indexOf("-leave")>=0)){var e=this.$props.insertExtraNode;this.extraNode=document.createElement("div");var o=this.extraNode;o.className="ant-click-animating-node";var r=this.getAttributeName();t.removeAttribute(r),t.setAttribute(r,"true"),a=a||document.createElement("style"),n&&n!=="#ffffff"&&n!=="rgb(255, 255, 255)"&&x(n)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(n)&&n!=="transparent"&&(this.csp&&this.csp.nonce&&(a.nonce=this.csp.nonce),o.style.borderColor=n,a.innerHTML=`
        [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {
          --antd-wave-shadow-color: `.concat(n,`;
        }`),document.body.contains(a)||document.body.appendChild(a)),e&&t.appendChild(o),f.addStartEventListener(t,this.onTransitionStart),f.addEndEventListener(t,this.onTransitionEnd)}},onTransitionStart:function(t){if(!this._.isUnmounted){var n=l(this);!t||t.target!==n||this.animationStart||this.resetEffect(n)}},onTransitionEnd:function(t){!t||t.animationName!=="fadeEffect"||this.resetEffect(t.target)},getAttributeName:function(){var t=this.$props.insertExtraNode;return t?"ant-click-animating":"ant-click-animating-without-extra-node"},bindAnimationEvent:function(t){var n=this;if(!(!t||!t.getAttribute||t.getAttribute("disabled")||t.className.indexOf("disabled")>=0)){var e=function(r){if(!(r.target.tagName==="INPUT"||T(r.target))){n.resetEffect(t);var c=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");n.clickWaveTimeoutId=window.setTimeout(function(){return n.onClick(t,c)},0),E.cancel(n.animationStartId),n.animationStart=!0,n.animationStartId=E(function(){n.animationStart=!1},10)}};return t.addEventListener("click",e,!0),{cancel:function(){t.removeEventListener("click",e,!0)}}}},resetEffect:function(t){if(!(!t||t===this.extraNode||!(t instanceof Element))){var n=this.$props.insertExtraNode,e=this.getAttributeName();t.setAttribute(e,"false"),a&&(a.innerHTML=""),n&&this.extraNode&&t.contains(this.extraNode)&&t.removeChild(this.extraNode),f.removeStartEventListener(t,this.onTransitionStart),f.removeEndEventListener(t,this.onTransitionEnd)}}},render:function(){var t,n,e=this.configProvider.csp;return e&&(this.csp=e),(n=(t=this.$slots).default)===null||n===void 0?void 0:n.call(t)[0]}});export{P as W};

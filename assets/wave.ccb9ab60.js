import{T as t}from"./Event.c36f22c9.js";import{w as e}from"./raf.edade736.js";import{d as n,m as i}from"./toNumber.5775a339.js";import{d as a,s as r,t as o}from"./vendor.d7feebf9.js";var s;function c(t){return!t||null===t.offsetParent}var d=a({name:"Wave",props:["insertExtraNode"],setup:function(){return{configProvider:r("configProvider",n)}},mounted:function(){var t=this;o((function(){var e=i(t);1===e.nodeType&&(t.instance=t.bindAnimationEvent(e))}))},beforeUnmount:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId)},methods:{onClick:function(e,n){if(!(!e||c(e)||e.className.indexOf("-leave")>=0)){var i=this.$props.insertExtraNode;this.extraNode=document.createElement("div");var a=this.extraNode;a.className="ant-click-animating-node";var r,o=this.getAttributeName();e.removeAttribute(o),e.setAttribute(o,"true"),s=s||document.createElement("style"),!n||"#ffffff"===n||"rgb(255, 255, 255)"===n||(r=(n||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/))&&r[1]&&r[2]&&r[3]&&r[1]===r[2]&&r[2]===r[3]||/rgba\(\d*, \d*, \d*, 0\)/.test(n)||"transparent"===n||(this.csp&&this.csp.nonce&&(s.nonce=this.csp.nonce),a.style.borderColor=n,s.innerHTML="\n        [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n          --antd-wave-shadow-color: ".concat(n,";\n        }"),document.body.contains(s)||document.body.appendChild(s)),i&&e.appendChild(a),t.addStartEventListener(e,this.onTransitionStart),t.addEndEventListener(e,this.onTransitionEnd)}},onTransitionStart:function(t){if(!this._.isUnmounted){var e=i(this);t&&t.target===e&&(this.animationStart||this.resetEffect(e))}},onTransitionEnd:function(t){t&&"fadeEffect"===t.animationName&&this.resetEffect(t.target)},getAttributeName:function(){return this.$props.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"},bindAnimationEvent:function(t){var n=this;if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var i=function(i){if("INPUT"!==i.target.tagName&&!c(i.target)){n.resetEffect(t);var a=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");n.clickWaveTimeoutId=window.setTimeout((function(){return n.onClick(t,a)}),0),e.cancel(n.animationStartId),n.animationStart=!0,n.animationStartId=e((function(){n.animationStart=!1}),10)}};return t.addEventListener("click",i,!0),{cancel:function(){t.removeEventListener("click",i,!0)}}}},resetEffect:function(e){if(e&&e!==this.extraNode&&e instanceof Element){var n=this.$props.insertExtraNode,i=this.getAttributeName();e.setAttribute(i,"false"),s&&(s.innerHTML=""),n&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),t.removeStartEventListener(e,this.onTransitionStart),t.removeEndEventListener(e,this.onTransitionEnd)}}},render:function(){var t,e,n=this.configProvider.csp;return n&&(this.csp=n),null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t)[0]}});export{d as W};

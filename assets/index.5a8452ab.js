var z=Object.defineProperty,B=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var y=(a,o,t)=>o in a?z(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t,m=(a,o)=>{for(var t in o||(o={}))F.call(o,t)&&y(a,t,o[t]);if(v)for(var t of v(o))R.call(o,t)&&y(a,t,o[t]);return a},c=(a,o)=>B(a,E(o));import{d as K}from"./index.1452a2c0.js";import{d as j,r,h as g,x as k,a as l,a5 as x,b as h}from"./index.e1409c94.js";import{C}from"./Card.72d41c0d.js";import{F as b}from"./Form.ccdeba7a.js";import{R as q,C as d}from"./index.580754a0.js";import{I as N}from"./Input.db60bf9c.js";import{S as O}from"./index.0debbcaf.js";import{B as S}from"./button.6a459199.js";import{T as V}from"./index.1e2fd8c8.js";const i={xs:24,sm:24,md:12,lg:12,xl:8,xxl:8},A={},D=j({props:c(m({},A),{columns:{type:Object},request:{type:Function},rowKey:{type:String,default:()=>"id"},search:{type:Boolean,default:()=>!0}}),setup(a,{attrs:o}){const t=r({}),I=r(void 0),f=r([]),p=g(()=>{var e;return((e=a.columns)==null?void 0:e.filter(n=>!n.hideInForm&&!n.customRender))||[]}),P=g(()=>{var e;return(e=a.columns)==null?void 0:e.filter(n=>!n.hideInTable)}),u=r({total:0,current:1,pageSize:10}),s=async()=>{var n;const e=await((n=a.request)==null?void 0:n.call(a,{current:u.value.current,pageSize:u.value.pageSize},{},K(t.value)));f.value=(e==null?void 0:e.list)||[],u.value.total=(e==null?void 0:e.total)||0},w=()=>{Object.keys(t.value).forEach(e=>t.value[e]=void 0)},T=(e,n)=>{u.value.current=e,u.value.pageSize=n,s()};return k(()=>{s()}),()=>l("div",{class:"av-pro-table"},[a.search&&l(C,null,{default:()=>[l(b,{layout:"horizontal",model:t.value,ref:I,"label-col":{span:10},"wrapper-col":{span:14}},{default:()=>[l(q,{type:"flex",justify:"start"},{default:()=>[p.value.map(e=>l(d,i,{default:()=>[l(b.Item,{label:e.title,name:e.dataIndex},{default:()=>[l(N,{value:t.value[e.dataIndex||""],"onUpdate:value":n=>t.value[e.dataIndex||""]=n},null)]})]})),p.value.length%2===0&&l(d,i,null),l(d,x(i,{style:{textAlign:"right",marginBottom:"24px"}}),{default:()=>[l(O,null,{default:()=>[l(S,{onClick:w},{default:()=>[h("\u91CD\u7F6E")]}),l(S,{type:"primary",onClick:s},{default:()=>[h("\u67E5\u8BE2")]})]})]})]})]})]}),l(C,null,{default:()=>[l(V,x(o,{rowKey:a.rowKey,columns:P.value,dataSource:f.value,pagination:c(m({},u.value),{onChange:T})}),null)]})])}});var Y=D;export{Y as P};

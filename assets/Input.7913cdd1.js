import{P as e,t,g as a,d as n,x as r,o as s,_ as i,J as o,F as l,j as u,G as d}from"./debounce.7c4b284f.js";import{a as c}from"./antInputDirective.dcf4b893.js";import{o as f}from"./index.9563d230.js";import{d as p,i as h,t as v,z as g,C}from"./vendor.13fa0854.js";import{C as m}from"./CloseCircleFilled.b1621eba.js";var b={prefixCls:e.string,inputPrefixCls:e.string,defaultValue:e.oneOfType([e.string,e.number]),value:e.oneOfType([e.string,e.number]),placeholder:{type:[String,Number]},type:e.string.def("text"),name:e.string,size:{type:String},disabled:e.looseBool,readonly:e.looseBool,addonBefore:e.VNodeChild,addonAfter:e.VNodeChild,prefix:e.VNodeChild,suffix:e.VNodeChild,autofocus:e.looseBool,allowClear:e.looseBool,lazy:e.looseBool.def(!0),maxlength:e.number,loading:e.looseBool,onPressEnter:e.func,onKeydown:e.func,onKeyup:e.func,onFocus:e.func,onBlur:e.func,onChange:e.func,onInput:e.func,"onUpdate:value":e.func};var x=["text","input"],w=p({name:"ClearableLabeledInput",inheritAttrs:!1,props:{prefixCls:e.string,inputType:e.oneOf(t("text","input")),value:e.any,defaultValue:e.any,allowClear:e.looseBool,element:e.VNodeChild,handleReset:e.func,disabled:e.looseBool,size:e.oneOf(t("small","large","default")),suffix:e.VNodeChild,prefix:e.VNodeChild,addonBefore:e.VNodeChild,addonAfter:e.VNodeChild,readonly:e.looseBool,isFocused:e.looseBool},methods:{renderClearIcon:function(e){var t=this.$props,r=t.allowClear,s=t.value,i=t.disabled,o=t.readonly,l=t.inputType,u=t.handleReset;if(!r)return null;var d=!i&&!o&&null!=s&&""!==s,c="".concat(e,l===x[0]?"-textarea-clear-icon":"-clear-icon");return h(m,{onClick:u,class:a(c,n({},"".concat(c,"-hidden"),!d)),role:"button"},null)},renderSuffix:function(e){var t=this.$props,a=t.suffix,n=t.allowClear;return a||n?h("span",{class:"".concat(e,"-suffix")},[this.renderClearIcon(e),a]):null},renderLabeledIcon:function(e,t){var i,o,l,u=this.$props,d=this.$attrs.style,c=this.renderSuffix(e);if(!(r(l=this,"prefix")||r(l,"suffix")||l.$props.allowClear))return s(t,{value:u.value});var f=u.prefix?h("span",{class:"".concat(e,"-prefix")},[u.prefix]):null,p=a(null===(o=this.$attrs)||void 0===o?void 0:o.class,"".concat(e,"-affix-wrapper"),(n(i={},"".concat(e,"-affix-wrapper-focused"),u.isFocused),n(i,"".concat(e,"-affix-wrapper-disabled"),u.disabled),n(i,"".concat(e,"-affix-wrapper-sm"),"small"===u.size),n(i,"".concat(e,"-affix-wrapper-lg"),"large"===u.size),n(i,"".concat(e,"-affix-wrapper-input-with-clear-btn"),u.suffix&&u.allowClear&&this.$props.value),i));return h("span",{class:p,style:d},[f,s(t,{style:null,value:u.value,class:V(e,u.size,u.disabled)}),c])},renderInputWithLabel:function(e,t){var r,i=this.$props,o=i.addonBefore,l=i.addonAfter,u=i.size,d=this.$attrs,c=d.style,f=d.class;if(!o&&!l)return t;var p="".concat(e,"-group"),v="".concat(p,"-addon"),g=o?h("span",{class:v},[o]):null,C=l?h("span",{class:v},[l]):null,m=a("".concat(e,"-wrapper"),n({},p,o||l)),b=a(f,"".concat(e,"-group-wrapper"),(n(r={},"".concat(e,"-group-wrapper-sm"),"small"===u),n(r,"".concat(e,"-group-wrapper-lg"),"large"===u),r));return h("span",{class:b,style:c},[h("span",{class:m},[g,s(t,{style:null}),C])])},renderTextAreaWithClearIcon:function(e,t){var n=this.$props,r=n.value,i=n.allowClear,o=this.$attrs,l=o.style,u=o.class;if(!i)return s(t,{value:r});var d=a(u,"".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"));return h("span",{class:d,style:l},[s(t,{style:null,value:r}),this.renderClearIcon(e)])},renderClearableLabeledInput:function(){var e=this.$props,t=e.prefixCls,a=e.inputType,n=e.element;return a===x[0]?this.renderTextAreaWithClearIcon(t,n):this.renderInputWithLabel(t,this.renderLabeledIcon(t,n))}},render:function(){return this.renderClearableLabeledInput()}});function y(e){return null==e?"":e}function I(e,t,a){if(a){var n=t;if("click"===t.type){Object.defineProperty(n,"target",{writable:!0}),Object.defineProperty(n,"currentTarget",{writable:!0}),n.target=e,n.currentTarget=e;var r=e.value;return e.value="",a(n),void(e.value=r)}a(n)}}function V(e,t,r){var s;return a(e,(n(s={},"".concat(e,"-sm"),"small"===t),n(s,"".concat(e,"-lg"),"large"===t),n(s,"".concat(e,"-disabled"),r),s))}var B=p({name:"AInput",inheritAttrs:!1,props:i({},b),setup:function(){return{configProvider:v("configProvider",d),removePasswordTimeout:void 0,input:null,clearableInput:null}},data:function(){var e=this.$props,t=void 0===e.value?e.defaultValue:e.value;return{stateValue:void 0===t?"":t,isFocused:!1}},watch:{value:function(e){this.stateValue=e}},mounted:function(){var e=this;g((function(){e.clearPasswordValueAttribute()}))},beforeUnmount:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)},methods:{handleInputFocus:function(e){this.isFocused=!0,this.onFocus&&this.onFocus(e)},handleInputBlur:function(e){this.isFocused=!1,this.onBlur&&this.onBlur(e)},focus:function(){this.input.focus()},blur:function(){this.input.blur()},select:function(){this.input.select()},saveClearableInput:function(e){this.clearableInput=e},saveInput:function(e){this.input=e},setValue:function(e,t){this.stateValue!==e&&(o(this,"value")?this.$forceUpdate():this.stateValue=e,g((function(){t&&t()})))},triggerChange:function(e){this.$emit("update:value",e.target.value),this.$emit("change",e),this.$emit("input",e)},handleReset:function(e){var t=this;this.setValue("",(function(){t.focus()})),I(this.input,e,this.triggerChange)},renderInput:function(e,t){var r=t.addonBefore,s=t.addonAfter,o=f(this.$props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","lazy","size","inputPrefixCls","loading"]),l=this.handleKeyDown,u=this.handleChange,d=this.handleInputFocus,p=this.handleInputBlur,v=this.size,g=this.disabled,m=this.$attrs,b=i(i(i({},o),m),{onKeydown:l,class:a(V(e,v,g),n({},m.class,m.class&&!r&&!s)),ref:this.saveInput,key:"ant-input",onInput:u,onChange:u,onFocus:d,onBlur:p});b.autofocus||delete b.autofocus;var x=h("input",b,null);return C(x,[[c]])},clearPasswordValueAttribute:function(){var e=this;this.removePasswordTimeout=setTimeout((function(){e.input&&e.input.getAttribute&&"password"===e.input.getAttribute("type")&&e.input.hasAttribute("value")&&e.input.removeAttribute("value")}))},handleChange:function(e){var t=e.target,a=t.value,n=t.composing;(t.isComposing||n)&&this.lazy||this.stateValue===a||(this.setValue(a,this.clearPasswordValueAttribute),I(this.input,e,this.triggerChange))},handleKeyDown:function(e){13===e.keyCode&&this.$emit("pressEnter",e),this.$emit("keydown",e)}},render:function(){var e=this.$props.prefixCls,t=this.$data,a=t.stateValue,n=t.isFocused,s=(0,this.configProvider.getPrefixCls)("input",e),o=r(this,"addonAfter"),d=r(this,"addonBefore"),c=r(this,"suffix"),f=r(this,"prefix"),p=i(i(i({},this.$attrs),l(this)),{prefixCls:s,inputType:"input",value:y(a),element:this.renderInput(s,{addonAfter:o,addonBefore:d}),handleReset:this.handleReset,addonAfter:o,addonBefore:d,suffix:c,prefix:f,isFocused:n});return h(w,u(u({},p),{},{ref:this.saveClearableInput}),null)}});export{w as C,B as I,y as f,b as i,I as r};

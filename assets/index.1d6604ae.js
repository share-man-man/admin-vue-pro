var E=Object.defineProperty,F=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var y=(a,o,t)=>o in a?E(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t,d=(a,o)=>{for(var t in o||(o={}))z.call(o,t)&&y(a,t,o[t]);if(v)for(var t of v(o))B.call(o,t)&&y(a,t,o[t]);return a},i=(a,o)=>F(a,T(o));import{d as R}from"./index.939baae1.js";import{d as K,l as r,p as b,E as k,i as l,m as g,j as x}from"./vendor.0aef34f5.js";import{C as j}from"./Card.d5621784.js";import{F as C}from"./Form.210842bd.js";import{R as q,C as m}from"./index.ed5ee94f.js";import{I as N}from"./Input.8b770423.js";import{S as O}from"./index.db4d44f6.js";import{B as h}from"./button.80abb62f.js";import{T as V}from"./index.75885935.js";const c={xs:24,sm:24,md:12,lg:12,xl:8,xxl:8},A={},D=K({props:i(d({},A),{columns:{type:Object},request:{type:Function},rowKey:{type:String,default:()=>"id"},search:{type:Boolean,default:()=>!0}}),setup(a,{attrs:o}){const t=r({}),S=r(void 0),f=r([]),p=b(()=>{var e;return((e=a.columns)==null?void 0:e.filter(n=>!n.hideInForm&&!n.customRender))||[]}),I=b(()=>{var e;return(e=a.columns)==null?void 0:e.filter(n=>!n.hideInTable)}),u=r({total:0,current:1,pageSize:10}),s=async()=>{var n;const e=await((n=a.request)==null?void 0:n.call(a,{current:u.value.current,pageSize:u.value.pageSize},{},R(t.value)));f.value=(e==null?void 0:e.list)||[],u.value.total=(e==null?void 0:e.total)||0},P=()=>{Object.keys(t.value).forEach(e=>t.value[e]=void 0)},w=(e,n)=>{u.value.current=e,u.value.pageSize=n,s()};return k(()=>{s()}),()=>l("div",{class:"av-pro-table"},[a.search&&l(j,null,{default:()=>[l(C,{layout:"horizontal",model:t.value,ref:S,"label-col":{span:10},"wrapper-col":{span:14}},{default:()=>[l(q,{type:"flex",justify:"start"},{default:()=>[p.value.map(e=>l(m,c,{default:()=>[l(C.Item,{label:e.title,name:e.dataIndex},{default:()=>[l(N,{value:t.value[e.dataIndex||""],"onUpdate:value":n=>t.value[e.dataIndex||""]=n},null)]})]})),p.value.length%2==0&&l(m,c,null),l(m,g(c,{style:{textAlign:"right",marginBottom:"24px"}}),{default:()=>[l(O,null,{default:()=>[l(h,{onClick:P},{default:()=>[x("\u91CD\u7F6E")]}),l(h,{type:"primary",onClick:s},{default:()=>[x("\u67E5\u8BE2")]})]})]})]})]})]}),l(j,null,{default:()=>[l(V,g(o,{rowKey:a.rowKey,columns:I.value,dataSource:f.value,pagination:i(d({},u.value),{onChange:w})}),null)]})])}});var Y=D;export{Y as P};

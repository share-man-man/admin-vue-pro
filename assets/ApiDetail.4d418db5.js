import{P as e,a as t}from"./Content.b7a0990b.js";import{c as a,d as r,e as i,u as l}from"./project.6f4db73b.js";import{d as o,l as d,p as s,E as u,i as n,B as m,j as p,F as c}from"./vendor.1bd2b8e6.js";import{A as j}from"./index.c2cffaaf.js";import{C as f}from"./Card.94855f1a.js";import{F as v}from"./Form.f8c7f4b5.js";import{I as b}from"./Input.408dcd39.js";import{a as y}from"./index.87c53ebd.js";import{B as C}from"./button.e3462cc8.js";import{a as I}from"./index.98b229ad.js";import"./oauth.a592370f.js";import"./debounce.67102cb7.js";import"./CloseCircleOutlined.6d9c7e17.js";import"./InfoCircleOutlined.84638a0f.js";import"./code.aa7872b2.js";import"./index.5de5e16b.js";import"./index.de9e740c.js";import"./Avatar.d844643d.js";import"./useBreakpoint.b2479951.js";import"./_Set.ca07d085.js";import"./useSize.851ed957.js";import"./Menu.5318a6ec.js";import"./_setToArray.8a352537.js";import"./Trigger.156447fc.js";import"./EllipsisOutlined.88c23d2d.js";import"./index.f1687d16.js";import"./index.e29b2859.js";import"./LeftOutlined.50f925a1.js";import"./transButton.49c6219d.js";import"./index.39d89e53.js";import"./tabs.bc9c9fda.js";import"./Col.9fc09512.js";import"./SearchOutlined.533be71d.js";import"./isArrayLikeObject.cfeac306.js";import"./_baseProperty.74f89655.js";import"./toInteger.c61af842.js";import"./ExclamationCircleFilled.27963c8d.js";import"./CloseCircleFilled.95e08edd.js";import"./LoadingOutlined.9700002e.js";import"./initDefaultProps.472cb804.js";import"./antInputDirective.093c4552.js";import"./index.9563d230.js";import"./CheckOutlined.4b6327c0.js";import"./wave.210dcc9a.js";import"./createChainedFunction.2d5d7d53.js";var x=o({props:{id:{type:[Number],require:!1},projectId:{type:[Number],require:!1}},setup(o){const x=d({}),O=d(void 0),_=s((()=>o.id?"edit":"add")),h=d([]),P=()=>{var e;null==(e=null==O?void 0:O.value)||e.validateFields().then((()=>{"add"===_.value?(i(x.value),I.success("添加成功")):"edit"===_.value&&(l(x.value),I.success("修改成功"))}))};return u((async()=>{if(a().then((e=>{h.value=e.list})),"edit"===_.value){const e=await r({id:o.id});x.value=e}})),()=>{let a;return n(c,null,[n(e,null,{default:()=>[n(j,null,{default:()=>[o.id?"api详情页":"新建api"]})]}),n(t,null,{default:()=>[n(f,null,{default:()=>[n(v,{layout:"vertical",model:x.value,ref:O},{default:()=>[n(v.Item,{label:"id",name:"id"},{default:()=>[n(b,{value:x.value.id,"onUpdate:value":e=>x.value.id=e,disabled:!0},null)]}),n(v.Item,{label:"api描述",name:"name",required:!0},{default:()=>[n(b,{value:x.value.name,"onUpdate:value":e=>x.value.name=e},null)]}),n(v.Item,{label:"关联项目英文名"},{default:()=>{var e;return[n(b,{value:null==(e=h.value.find((e=>e.id===x.value.project_id)))?void 0:e.code,disabled:!0},null)]}}),n(v.Item,{label:"关联项目",name:"project_id",rules:[{type:"number"},{validator:(e,t)=>t?Promise.resolve():Promise.reject("请输入关联项目")}]},{default:()=>{return[n(y,{value:x.value.project_id,"onUpdate:value":e=>x.value.project_id=e},(e=a=h.value.map((e=>n(y.Option,{key:e.id,value:e.id},{default:()=>[e.name]}))),"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!m(e)?a:{default:()=>[a]}))];var e}}),n(v.Item,{label:"请求路径",name:"url",required:!0},{default:()=>[n(b,{value:x.value.url,"onUpdate:value":e=>x.value.url=e},null)]}),n(v.Item,{label:"mock数据的json字符串",name:"json_str",rules:[{validator:(e,t)=>{if(!t)return Promise.reject("json串不能为空");try{if("object"!=typeof JSON.parse(t))throw new Error}catch(a){return Promise.reject("请输入正确的json格式")}return Promise.resolve()}}]},{default:()=>[n(b.TextArea,{value:x.value.json_str,"onUpdate:value":e=>x.value.json_str=e,allowClear:!0,autoSize:{minRows:8}},null)]}),n(v.Item,null,{default:()=>[n(C,{type:"primary",onClick:P},{default:()=>[p("提交")]})]})]})]})]})])}}});export default x;

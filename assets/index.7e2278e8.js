import{g as B,P as V,a as X}from"./Content.a3f02a4b.js";import{d as j,t as M,i as e,l as _,E as T,G as q,v as W,j as f,w as Y,n as J,B as K,F as Q}from"./vendor.0aef34f5.js";import{g as Z,d as D,_ as b,a as tt,f as N,t as et,l as at,b as rt,i as it,c as ot,e as nt,h as lt,p as st,s as dt,j as ut,k as ct,m as pt,n as P,U as vt,o as L,T as mt,r as ft,A as gt,q as ht,u as xt,P as Ct,v as yt,w as _t}from"./workspace.e4230160.js";import{A as bt}from"./index.459e5535.js";import{C as x}from"./Card.d5621784.js";import{P as A,d as E,x as S,G as z,s as jt,f as At,j as Dt,_ as w}from"./debounce.b47df357.js";import"./index.06c557a8.js";import{A as F}from"./Avatar.2c90d7ed.js";import{L as R}from"./index.adfb9492.js";import{P as wt}from"./tabs.be0aa087.js";import{c as Ft,s as Tt,a as Pt,S as C}from"./Statistic.8ca7a1cf.js";import{i as Et}from"./initDefaultProps.c0b944b7.js";import{t as St}from"./toInteger.fd7802d2.js";import{w as Rt}from"./SearchOutlined.299869a2.js";import{R as H,C as k}from"./index.ed5ee94f.js";import{B as kt}from"./button.80abb62f.js";import"./oauth.a753370a.js";import"./index.75ac00a3.js";import"./createChainedFunction.2d5d7d53.js";import"./ExclamationCircleFilled.7a9ee298.js";import"./CloseCircleFilled.4ca4922c.js";import"./LoadingOutlined.e8e7e3ee.js";import"./CloseCircleOutlined.99fb16f4.js";import"./InfoCircleOutlined.354af1bf.js";import"./code.aa7872b2.js";import"./index.de3dd9d1.js";import"./transButton.11ee6a98.js";import"./_Set.b615e6a2.js";import"./Menu.231ac2cf.js";import"./_setToArray.e78d1c9a.js";import"./Trigger.c2d15a0a.js";import"./EllipsisOutlined.1f4e2b9f.js";import"./useSize.10ad6ac6.js";import"./index.b375f5f0.js";import"./index.40f0cc85.js";import"./LeftOutlined.14b5f9c0.js";import"./useBreakpoint.0c1d4844.js";import"./index.8a433638.js";import"./index.9f492c9b.js";import"./index.9563d230.js";import"./antInputDirective.dcf4b893.js";import"./CheckOutlined.27ffbdda.js";import"./Col.b260d2ad.js";import"./_baseProperty.74f89655.js";import"./wave.49730b57.js";var I=j({name:"ACardMeta",props:{prefixCls:A.string,title:A.VNodeChild,description:A.VNodeChild,avatar:A.VNodeChild},setup:function(){return{configProvider:M("configProvider",z)}},render:function(){var a=this.$props.prefixCls,r=this.configProvider.getPrefixCls,i=r("card",a),l=E({},"".concat(i,"-meta"),!0),o=S(this,"avatar"),n=S(this,"title"),d=S(this,"description"),u=o?e("div",{class:"".concat(i,"-meta-avatar")},[o]):null,g=n?e("div",{class:"".concat(i,"-meta-title")},[n]):null,m=d?e("div",{class:"".concat(i,"-meta-description")},[d]):null,p=g||m?e("div",{class:"".concat(i,"-meta-detail")},[g,m]):null;return e("div",{class:l},[u,p])}}),O=j({name:"ACardGrid",__ANT_CARD_GRID:!0,props:{prefixCls:A.string,hoverable:A.looseBool},setup:function(){return{configProvider:M("configProvider",z)}},render:function(){var a,r=this.$props,i=r.prefixCls,l=r.hoverable,o=l===void 0?!0:l,n=this.configProvider.getPrefixCls,d=n("card",i),u=(a={},E(a,"".concat(d,"-grid"),!0),E(a,"".concat(d,"-grid-hoverable"),o),a);return e("div",{class:u},[jt(this)])}});x.Meta=I;x.Grid=O;x.install=function(t){return t.component(x.name,x),t.component(I.name,I),t.component(O.name,O),t};function It(t,a,r){t=Rt(t),a=St(a);var i=a?Tt(t):0;return a&&i<a?Ft(a-i,r)+t:t}var Ot=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function $t(t,a){var r=t,i=/\[[^\]]*]/g,l=(a.match(i)||[]).map(function(u){return u.slice(1,-1)}),o=a.replace(i,"[]"),n=Ot.reduce(function(u,g){var m=At(g,2),p=m[0],c=m[1];if(u.indexOf(p)!==-1){var s=Math.floor(r/c);return r-=s*c,u.replace(new RegExp("".concat(p,"+"),"g"),function(h){var y=h.length;return It(s.toString(),y,"0")})}return u},o),d=0;return n.replace(i,function(){var u=l[d];return d+=1,u})}function Bt(t,a){var r=a.format,i=r===void 0?"":r,l=new Date(t).getTime(),o=Date.now(),n=Math.max(l-o,0);return $t(n,i)}var Mt=1e3/30;function $(t){return new Date(t).getTime()}var Nt=j({name:"AStatisticCountdown",props:Et(Pt,{format:"HH:mm:ss"}),emits:["finish","change"],setup:function(a,r){var i=r.emit,l=_(),o=_(),n=function(){var c=a.value,s=$(c);s>=Date.now()?d():u()},d=function(){if(!l.value){var c=$(a.value);l.value=window.setInterval(function(){o.value.$forceUpdate(),c>Date.now()&&i("change",c-Date.now()),n()},Mt)}},u=function(){var c=a.value;if(l.value){clearInterval(l.value),l.value=void 0;var s=$(c);s<Date.now()&&i("finish")}},g=function(c){var s=c.value,h=c.config,y=a.format;return Bt(s,w(w({},h),{format:y}))},m=function(c){return c};return T(function(){n()}),q(function(){n()}),W(function(){u()}),function(){return e(C,Dt({ref:o},w(w({},a),{valueRender:m,formatter:g})),null)}}});C.Countdown=Nt;C.install=function(t){return t.component(C.name,C),t.component(C.Countdown.name,C.Countdown),t};C.Countdown;var Lt=j({setup(t,{slots:a}){return()=>e("div",{class:"av-header-wrap"},[e("div",{class:"av-header-wrap-content"},[B(a,"content")]),e("div",{class:"av-header-wrap-extra"},[f(" "),B(a,"extra")])])}});const zt="_avatar_rv028_4",Ht="_content_rv028_13",Gt="_datetime_rv028_117",Ut="_members_rv028_139",Vt="_member_rv028_139",Xt="_mobile_rv028_158",qt="_headerContent_rv028_166",Wt="_title_rv028_166";var v={"page-header-content":"_page-header-content_rv028_1",avatar:zt,content:Ht,"content-title":"_content-title_rv028_21","extra-content":"_extra-content_rv028_28","stat-item":"_stat-item_rv028_44","project-list":"_project-list_rv028_80","card-title":"_card-title_rv028_80","card-description":"_card-description_rv028_95","project-item":"_project-item_rv028_101",datetime:Gt,"ant-card-meta-description":"_ant-card-meta-description_rv028_122","item-group":"_item-group_rv028_128",members:Ut,member:Vt,mobile:Xt,"project-card-grid":"_project-card-grid_rv028_158","more-info":"_more-info_rv028_161",headerContent:qt,title:Wt,"welcome-text":"_welcome-text_rv028_166"};function Yt(t){var a=t.options,r=a.area,i=a.xField,l=a.yField,o=a.seriesField,n=a.smooth,d=a.tooltip,u=tt(d,[i,l,o]),g=u.fields,m=u.formatter;return r?Z(D({},t,{options:{type:"area",colorField:o,tooltipFields:g,mapping:b({shape:n?"smooth":"area",tooltip:m},r)}})):t}function Jt(t){var a=t.chart,r=t.options,i=r.data,l=r.lineStyle,o=r.color,n=r.point,d=r.area;a.data(i);var u=D({},t,{options:{line:{style:l,color:o},point:n&&b({color:o},n),area:d&&b({color:o},d),label:void 0}}),g=D({},u,{options:{tooltip:!1}}),m=(n==null?void 0:n.state)||r.state,p=D({},u,{options:{tooltip:!1,state:m}});return lt(u),st(p),Yt(g),t}function Kt(t){var a,r=t.options,i=r.xAxis,l=r.yAxis,o=r.xField,n=r.yField;return N(dt((a={},a[o]=i,a[n]=l,a)))(t)}function Qt(t){var a=t.chart,r=t.options,i=r.radius,l=r.startAngle,o=r.endAngle;return a.coordinate("polar",{radius:i,startAngle:l,endAngle:o}),t}function Zt(t){var a=t.chart,r=t.options,i=r.xField,l=r.xAxis,o=r.yField,n=r.yAxis;return a.axis(i,l),a.axis(o,n),t}function te(t){var a=t.chart,r=t.options,i=r.label,l=r.yField,o=ut(a,"line");if(!i)o.label(!1);else{var n=i.callback,d=ct(i,["callback"]);o.label({fields:[l],callback:n,cfg:pt(d)})}return t}function ee(t){return N(Jt,Kt,et,Qt,Zt,at,rt,te,it,ot,nt())(t)}var ae=function(t){P(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(a.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),a.prototype.getTooltipItems=function(r){var i=this.getTooltipCfg(),l=i.shared,o=i.title,n=t.prototype.getTooltipItems.call(this,r);if(n.length>0){var d=this.view.geometries[0],u=d.dataArray,g=n[0].name,m=[];return u.forEach(function(p){p.forEach(function(c){var s=vt.getTooltipItems(c,d),h=s[0];if(!l&&h&&h.name===g){var y=L(o)?g:o;m.push(b(b({},h),{name:h.title,title:y}))}else if(l&&h){var y=L(o)?h.name||g:o;m.push(b(b({},h),{name:h.title,title:y}))}})}),m}return[]},a}(mt);ft("radar-tooltip",ae);var re=function(t){P(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return a.prototype.init=function(){var r=this.context.view;r.removeInteraction("tooltip")},a.prototype.show=function(){var r=this.context.event,i=this.getTooltipController();i.showTooltip({x:r.x,y:r.y})},a.prototype.hide=function(){var r=this.getTooltipController();r.hideTooltip()},a.prototype.getTooltipController=function(){var r=this.context.view;return r.getController("radar-tooltip")},a}(gt);ht("radar-tooltip",re);xt("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var ie=function(t){P(a,t);function a(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="radar",r}return a.prototype.changeData=function(r){this.updateOption({data:r}),this.chart.changeData(r)},a.prototype.getDefaultOptions=function(){return D({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},a.prototype.getSchemaAdaptor=function(){return ee},a}(Ct),oe=j({props:{data:{type:Array,default:()=>[]}},setup(t){let a;const r={data:t.data,xField:"item",yField:"score",seriesField:"user",meta:{score:{alias:"\u5206\u6570",min:0,max:80}},xAxis:{line:null,tickLine:null,grid:{line:{style:{lineDash:null}}}},yAxis:{line:null,tickLine:null,grid:{line:{type:"line",style:{lineDash:null}}}},point:{size:2}};return T(()=>{a=new ie("radarContainer",r),a.render()}),Y(t.data,i=>{a.changeData(i)}),()=>e("div",{id:"radarContainer"},null)}});function G(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}var Ke=j({setup(){const t=_(!1),a=_(!1),r=_([]),i=_([]),l=_([]),o=J({avatar:"",name:""}),n=_([]),d=_({projectNum:0,teamRank:0,visitNum:0}),u=()=>e("div",{class:v["page-header-content"]},[e("div",{class:v.avatar},[e(F,{size:"large",src:o.avatar},null)]),e("div",{class:v.content},[e("div",{class:v["content-title"]},[f("\u65E9\u5B89\uFF0C"),o.name,e("span",{class:v["welcome-text"]},[f("\uFF0C\u4ECA\u5929\u53C8\u662F\u642C\u7816\u7684\u4E00\u5929")])]),e("div",null,[f("\u5168\u6808\u5DE5\u7A0B\u5E08 | \u677F\u7816\u6280\u672F\u90E8 - \u67D0\u67D0\u67D0\u4E8B\u4E1A\u7FA4 - \u524D\u7AEF\u5E73\u53F0")])])]),g=()=>e("div",{class:v["extra-content"]},[e("div",{class:v["stat-item"]},[e(C,{title:"\u9879\u76EE\u6570",value:d.value.projectNum},null)]),e("div",{class:v["stat-item"]},[e(C,{title:"\u56E2\u961F\u5185\u6392\u540D",value:d.value.teamRank,suffix:"/ 24"},null)]),e("div",{class:v["stat-item"]},[e(C,{title:"\u9879\u76EE\u8BBF\u95EE",value:d.value.visitNum},null)])]),m=async()=>{const{currentUser:p,projects:c,activities:s,teams:h,statistic:y}=await yt();o.avatar=p.avatar,o.name=p.name,r.value.push(...c),i.value.push(...s),l.value.push(...h),d.value=y;const U=await _t();n.value.splice(0,n.value.length,...U)};return T(()=>{m()}),()=>{let p,c;return e(Q,null,[e(V,null,{default:()=>[e(bt,{title:"\u5DE5\u4F5C\u53F0"},{default:()=>[e(Lt,null,{content:u,extra:g})]})]}),e(X,null,{default:()=>[e(H,{gutter:24},{default:()=>[e(k,{xl:16,lg:24,md:24,sm:24,xs:24},{default:()=>[e(x,{class:v["project-list"],loading:t.value,style:"margin-bottom: 22px;",bordered:!1,title:"\u6240\u6709\u9879\u76EE","body-style":{padding:0},extra:e("a",null,[f("\u5176\u4ED6")])},{default:()=>[e("div",null,[r.value.map(s=>e(x.Grid,{class:v["project-card-grid"],key:s.id},{default:()=>[e(x,{bordered:!1,"body-style":{padding:0}},{default:()=>[e(x.Meta,null,{title:()=>e("div",{class:v["card-title"]},[e(F,{size:"small",src:s.cover},null),e("a",null,[s.title])]),description:()=>e("div",{class:v["card-description"]},[s.description])}),e("div",{class:v["project-item"]},[e("a",{href:"/#/"},[f("\u79D1\u5B66\u642C\u7816\u7EC4")]),e("span",{class:v.datetime},[f("9\u5C0F\u65F6\u524D")])])]})]}))])]}),e(x,{loading:t.value,title:"\u52A8\u6001",bordered:!1},{default:()=>[e(R,null,G(p=i.value.map(s=>e(R.Item,{key:s.id},{default:()=>[e(R.Item.Meta,{avatar:e(F,{src:s.avatar},null)},{title:()=>e("div",null,[e("span",null,[s.nickname]),f("\xA0 \u5728\xA0"),e("a",{href:"#"},[s.project]),f("\xA0"),e("span",null,[s.action]),f("\xA0"),e("a",{href:"#"},[s.event])]),description:()=>e("div",null,[s.time])})]})))?p:{default:()=>[p]})]})]}),e(k,{style:"padding: 0 12px",xl:8,lg:24,md:24,sm:24,xs:24},{default:()=>[e(x,{title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",style:"margin-bottom: 24px",bordered:!1,"body-style":{padding:0}},{default:()=>[e("div",{class:v["item-group"]},[e("a",null,[f("\u64CD\u4F5C\u4E00")]),e("a",null,[f("\u64CD\u4F5C\u4E8C")]),e("a",null,[f("\u64CD\u4F5C\u4E09")]),e("a",null,[f("\u64CD\u4F5C\u56DB")]),e("a",null,[f("\u64CD\u4F5C\u4E94")]),e("a",null,[f("\u64CD\u4F5C\u516D")]),e(kt,{size:"small",type:"primary",ghost:!0,icon:e(wt,null,null)},{default:()=>[f("\u6DFB\u52A0")]})])]}),e(x,{title:"XX \u6307\u6570",style:"margin-bottom: 24px",loading:a.value,bordered:!1,"body-style":{padding:0}},{default:()=>[e("div",{style:"min-height: 400px;"},[e(oe,{data:n.value},null)])]}),e(x,{loading:t.value,title:"\u56E2\u961F",bordered:!1},{default:()=>[e("div",{class:v.members},[e(H,null,G(c=l.value.map(s=>e(k,{key:s.id,span:12},{default:()=>[e("a",null,[e(F,{size:"small",src:s.avatar},null),e("span",{class:v.member},[s.name])])]})))?c:{default:()=>[c]})])]})]})]})]})])}}});export{Ke as default};

import{g as L,P as V,a as X}from"./Content.04b38a87.js";import{d as A,k as H,a as e,r as C,x as $,y as q,o as W,b as g,w as Y,f as J,s as K,F as Q}from"./index.e1409c94.js";import{g as Z,d as w,_ as b,a as tt,f as z,t as et,l as at,b as rt,i as ot,c as it,e as nt,h as lt,p as st,s as ut,j as ct,k as dt,m as pt,n as N,U as vt,o as M,T as mt,r as ft,A as gt,q as ht,u as xt,P as yt,v as _t,w as Ct}from"./workspace.6291408d.js";import{A as bt}from"./index.9b3d4d87.js";import{C as x}from"./Card.72d41c0d.js";import{P as D,d as S,x as P,G as U,s as Dt,f as At,j as wt,_ as F}from"./debounce.63695ae7.js";import"./index.a46ebb6b.js";import{A as T}from"./Avatar.1434461f.js";import{L as E}from"./index.2ea12c47.js";import{P as Ft}from"./tabs.e87a6b5b.js";import{c as Tt,s as Pt,a as Et,S as y}from"./Statistic.ecb2fe0b.js";import{i as Rt}from"./initDefaultProps.5e2544d9.js";import{t as jt}from"./toInteger.37a40d04.js";import{x as St}from"./SearchOutlined.52ce1b8b.js";import{R as B,C as R}from"./index.580754a0.js";import{B as kt}from"./button.6a459199.js";import"./oauth.2cca38c9.js";import"./index.ec74e710.js";import"./createChainedFunction.2d5d7d53.js";import"./ExclamationCircleFilled.9f777fc4.js";import"./CloseCircleFilled.4dc39271.js";import"./LoadingOutlined.3103cde2.js";import"./CloseCircleOutlined.28f2dbdb.js";import"./InfoCircleOutlined.9f8a4fb5.js";import"./code.aa7872b2.js";import"./transButton.aaf2b8f0.js";import"./_Set.ed75c1de.js";import"./Menu.fb13f539.js";import"./_setToArray.0ddff03f.js";import"./Trigger.7768cff1.js";import"./EllipsisOutlined.90a80699.js";import"./useSize.9fcd18e3.js";import"./index.66957e12.js";import"./index.7b952c9e.js";import"./LeftOutlined.38c21891.js";import"./useBreakpoint.256f6e5f.js";import"./index.91886a29.js";import"./index.b893f673.js";import"./index.9563d230.js";import"./CheckOutlined.de965fe7.js";import"./Col.8566bedb.js";import"./_baseProperty.74f89655.js";import"./wave.af64de9e.js";var k=A({name:"ACardMeta",props:{prefixCls:D.string,title:D.VNodeChild,description:D.VNodeChild,avatar:D.VNodeChild},setup:function(){return{configProvider:H("configProvider",U)}},render:function(){var a=this.$props.prefixCls,r=this.configProvider.getPrefixCls,o=r("card",a),l=S({},"".concat(o,"-meta"),!0),i=P(this,"avatar"),n=P(this,"title"),u=P(this,"description"),c=i?e("div",{class:"".concat(o,"-meta-avatar")},[i]):null,m=n?e("div",{class:"".concat(o,"-meta-title")},[n]):null,f=u?e("div",{class:"".concat(o,"-meta-description")},[u]):null,d=m||f?e("div",{class:"".concat(o,"-meta-detail")},[m,f]):null;return e("div",{class:l},[c,d])}}),I=A({name:"ACardGrid",__ANT_CARD_GRID:!0,props:{prefixCls:D.string,hoverable:D.looseBool},setup:function(){return{configProvider:H("configProvider",U)}},render:function(){var a,r=this.$props,o=r.prefixCls,l=r.hoverable,i=l===void 0?!0:l,n=this.configProvider.getPrefixCls,u=n("card",o),c=(a={},S(a,"".concat(u,"-grid"),!0),S(a,"".concat(u,"-grid-hoverable"),i),a);return e("div",{class:c},[Dt(this)])}});x.Meta=k;x.Grid=I;x.install=function(t){return t.component(x.name,x),t.component(k.name,k),t.component(I.name,I),t};function It(t,a,r){t=St(t),a=jt(a);var o=a?Pt(t):0;return a&&o<a?Tt(a-o,r)+t:t}var $t=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Nt(t,a){var r=t,o=/\[[^\]]*]/g,l=(a.match(o)||[]).map(function(c){return c.slice(1,-1)}),i=a.replace(o,"[]"),n=$t.reduce(function(c,m){var f=At(m,2),d=f[0],p=f[1];if(c.indexOf(d)!==-1){var s=Math.floor(r/p);return r-=s*p,c.replace(new RegExp("".concat(d,"+"),"g"),function(h){var _=h.length;return It(s.toString(),_,"0")})}return c},i),u=0;return n.replace(o,function(){var c=l[u];return u+=1,c})}function Lt(t,a){var r=a.format,o=r===void 0?"":r,l=new Date(t).getTime(),i=Date.now(),n=Math.max(l-i,0);return Nt(n,o)}var Mt=1e3/30;function j(t){return new Date(t).getTime()}var Bt=A({name:"AStatisticCountdown",props:Rt(Et,{format:"HH:mm:ss"}),emits:["finish","change"],setup:function(a,r){var o=r.emit,l=C(),i=C(),n=function(){var p=a.value,s=j(p);s>=Date.now()?u():c()},u=function(){if(!l.value){var p=j(a.value);l.value=window.setInterval(function(){i.value.$forceUpdate(),p>Date.now()&&o("change",p-Date.now()),n()},Mt)}},c=function(){var p=a.value;if(l.value){clearInterval(l.value),l.value=void 0;var s=j(p);s<Date.now()&&o("finish")}},m=function(p){var s=p.value,h=p.config,_=a.format;return Lt(s,F(F({},h),{format:_}))},f=function(p){return p};return $(function(){n()}),q(function(){n()}),W(function(){c()}),function(){return e(y,wt({ref:i},F(F({},a),{valueRender:f,formatter:m})),null)}}});y.Countdown=Bt;y.install=function(t){return t.component(y.name,y),t.component(y.Countdown.name,y.Countdown),t};y.Countdown;var Ot=A({setup(t,{slots:a}){return()=>e("div",{class:"av-header-wrap"},[e("div",{class:"av-header-wrap-content"},[L(a,"content")]),e("div",{class:"av-header-wrap-extra"},[g(" "),L(a,"extra")])])}});const Ht="_avatar_rv028_4",zt="_content_rv028_13",Ut="_datetime_rv028_117",Gt="_members_rv028_139",Vt="_member_rv028_139",Xt="_mobile_rv028_158",qt="_headerContent_rv028_166",Wt="_title_rv028_166";var v={"page-header-content":"_page-header-content_rv028_1",avatar:Ht,content:zt,"content-title":"_content-title_rv028_21","extra-content":"_extra-content_rv028_28","stat-item":"_stat-item_rv028_44","project-list":"_project-list_rv028_80","card-title":"_card-title_rv028_80","card-description":"_card-description_rv028_95","project-item":"_project-item_rv028_101",datetime:Ut,"ant-card-meta-description":"_ant-card-meta-description_rv028_122","item-group":"_item-group_rv028_128",members:Gt,member:Vt,mobile:Xt,"project-card-grid":"_project-card-grid_rv028_158","more-info":"_more-info_rv028_161",headerContent:qt,title:Wt,"welcome-text":"_welcome-text_rv028_166"};function Yt(t){var a=t.options,r=a.area,o=a.xField,l=a.yField,i=a.seriesField,n=a.smooth,u=a.tooltip,c=a.useDeferredLabel,m=tt(u,[o,l,i]),f=m.fields,d=m.formatter;return r?Z(w({},t,{options:{type:"area",colorField:i,tooltipFields:f,mapping:b({shape:n?"smooth":"area",tooltip:d},r),args:{useDeferredLabel:c}}})):t}function Jt(t){var a=t.chart,r=t.options,o=r.data,l=r.lineStyle,i=r.color,n=r.point,u=r.area;a.data(o);var c=w({},t,{options:{line:{style:l,color:i},point:n&&b({color:i},n),area:u&&b({color:i},u),label:void 0}}),m=w({},c,{options:{tooltip:!1}}),f=(n==null?void 0:n.state)||r.state,d=w({},c,{options:{tooltip:!1,state:f}});return lt(c),st(d),Yt(m),t}function Kt(t){var a,r=t.options,o=r.xAxis,l=r.yAxis,i=r.xField,n=r.yField;return z(ut((a={},a[i]=o,a[n]=l,a)))(t)}function Qt(t){var a=t.chart,r=t.options,o=r.radius,l=r.startAngle,i=r.endAngle;return a.coordinate("polar",{radius:o,startAngle:l,endAngle:i}),t}function Zt(t){var a=t.chart,r=t.options,o=r.xField,l=r.xAxis,i=r.yField,n=r.yAxis;return a.axis(o,l),a.axis(i,n),t}function te(t){var a=t.chart,r=t.options,o=r.label,l=r.yField,i=ct(a,"line");if(!o)i.label(!1);else{var n=o.callback,u=dt(o,["callback"]);i.label({fields:[l],callback:n,cfg:pt(u)})}return t}function ee(t){return z(Jt,Kt,et,Qt,Zt,at,rt,te,ot,it,nt())(t)}var ae=function(t){N(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(a.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),a.prototype.getTooltipItems=function(r){var o=this.getTooltipCfg(),l=o.shared,i=o.title,n=t.prototype.getTooltipItems.call(this,r);if(n.length>0){var u=this.view.geometries[0],c=u.dataArray,m=n[0].name,f=[];return c.forEach(function(d){d.forEach(function(p){var s=vt.getTooltipItems(p,u),h=s[0];if(!l&&h&&h.name===m){var _=M(i)?m:i;f.push(b(b({},h),{name:h.title,title:_}))}else if(l&&h){var _=M(i)?h.name||m:i;f.push(b(b({},h),{name:h.title,title:_}))}})}),f}return[]},a}(mt);ft("radar-tooltip",ae);var re=function(t){N(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return a.prototype.init=function(){var r=this.context.view;r.removeInteraction("tooltip")},a.prototype.show=function(){var r=this.context.event,o=this.getTooltipController();o.showTooltip({x:r.x,y:r.y})},a.prototype.hide=function(){var r=this.getTooltipController();r.hideTooltip()},a.prototype.getTooltipController=function(){var r=this.context.view;return r.getController("radar-tooltip")},a}(gt);xt("radar-tooltip",re);ht("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var oe=function(t){N(a,t);function a(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="radar",r}return a.prototype.changeData=function(r){this.updateOption({data:r}),this.chart.changeData(r)},a.prototype.getDefaultOptions=function(){return w({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},a.prototype.getSchemaAdaptor=function(){return ee},a}(yt),ie=A({props:{data:{type:Array,default:()=>[]}},setup(t){let a;const r={data:t.data,xField:"item",yField:"score",seriesField:"user",meta:{score:{alias:"\u5206\u6570",min:0,max:80}},xAxis:{line:null,tickLine:null,grid:{line:{style:{lineDash:null}}}},yAxis:{line:null,tickLine:null,grid:{line:{type:"line",style:{lineDash:null}}}},point:{size:2}};return $(()=>{a=new oe("radarContainer",r),a.render()}),Y(t.data,o=>{a.changeData(o)}),()=>e("div",{id:"radarContainer"},null)}});function O(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}var Ye=A({setup(){const t=C(!1),a=C(!1),r=C([]),o=C([]),l=C([]),i=J({avatar:"",name:""}),n=C([]),u=C({projectNum:0,teamRank:0,visitNum:0}),c=()=>e("div",{class:v["page-header-content"]},[e("div",{class:v.avatar},[e(T,{size:"large",src:i.avatar},null)]),e("div",{class:v.content},[e("div",{class:v["content-title"]},[g("\u65E9\u5B89\uFF0C"),i.name,e("span",{class:v["welcome-text"]},[g("\uFF0C\u4ECA\u5929\u53C8\u662F\u642C\u7816\u7684\u4E00\u5929")])]),e("div",null,[g("\u5168\u6808\u5DE5\u7A0B\u5E08 | \u677F\u7816\u6280\u672F\u90E8 - \u67D0\u67D0\u67D0\u4E8B\u4E1A\u7FA4 - \u524D\u7AEF\u5E73\u53F0")])])]),m=()=>e("div",{class:v["extra-content"]},[e("div",{class:v["stat-item"]},[e(y,{title:"\u9879\u76EE\u6570",value:u.value.projectNum},null)]),e("div",{class:v["stat-item"]},[e(y,{title:"\u56E2\u961F\u5185\u6392\u540D",value:u.value.teamRank,suffix:"/ 24"},null)]),e("div",{class:v["stat-item"]},[e(y,{title:"\u9879\u76EE\u8BBF\u95EE",value:u.value.visitNum},null)])]),f=async()=>{const{currentUser:d,projects:p,activities:s,teams:h,statistic:_}=await _t();i.avatar=d.avatar,i.name=d.name,r.value.push(...p),o.value.push(...s),l.value.push(...h),u.value=_;const G=await Ct();n.value.splice(0,n.value.length,...G)};return $(()=>{f()}),()=>{let d,p;return e(Q,null,[e(V,null,{default:()=>[e(bt,{title:"\u5DE5\u4F5C\u53F0"},{default:()=>[e(Ot,null,{content:c,extra:m})]})]}),e(X,null,{default:()=>[e(B,{gutter:24},{default:()=>[e(R,{xl:16,lg:24,md:24,sm:24,xs:24},{default:()=>[e(x,{class:v["project-list"],loading:t.value,style:"margin-bottom: 22px;",bordered:!1,title:"\u6240\u6709\u9879\u76EE","body-style":{padding:0},extra:e("a",null,[g("\u5176\u4ED6")])},{default:()=>[e("div",null,[r.value.map(s=>e(x.Grid,{class:v["project-card-grid"],key:s.id},{default:()=>[e(x,{bordered:!1,"body-style":{padding:0}},{default:()=>[e(x.Meta,null,{title:()=>e("div",{class:v["card-title"]},[e(T,{size:"small",src:s.cover},null),e("a",null,[s.title])]),description:()=>e("div",{class:v["card-description"]},[s.description])}),e("div",{class:v["project-item"]},[e("a",{href:"/#/"},[g("\u79D1\u5B66\u642C\u7816\u7EC4")]),e("span",{class:v.datetime},[g("9\u5C0F\u65F6\u524D")])])]})]}))])]}),e(x,{loading:t.value,title:"\u52A8\u6001",bordered:!1},{default:()=>[e(E,null,O(d=o.value.map(s=>e(E.Item,{key:s.id},{default:()=>[e(E.Item.Meta,{avatar:e(T,{src:s.avatar},null)},{title:()=>e("div",null,[e("span",null,[s.nickname]),g("\xA0 \u5728\xA0"),e("a",{href:"#"},[s.project]),g("\xA0"),e("span",null,[s.action]),g("\xA0"),e("a",{href:"#"},[s.event])]),description:()=>e("div",null,[s.time])})]})))?d:{default:()=>[d]})]})]}),e(R,{style:"padding: 0 12px",xl:8,lg:24,md:24,sm:24,xs:24},{default:()=>[e(x,{title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",style:"margin-bottom: 24px",bordered:!1,"body-style":{padding:0}},{default:()=>[e("div",{class:v["item-group"]},[e("a",null,[g("\u64CD\u4F5C\u4E00")]),e("a",null,[g("\u64CD\u4F5C\u4E8C")]),e("a",null,[g("\u64CD\u4F5C\u4E09")]),e("a",null,[g("\u64CD\u4F5C\u56DB")]),e("a",null,[g("\u64CD\u4F5C\u4E94")]),e("a",null,[g("\u64CD\u4F5C\u516D")]),e(kt,{size:"small",type:"primary",ghost:!0,icon:e(Ft,null,null)},{default:()=>[g("\u6DFB\u52A0")]})])]}),e(x,{title:"XX \u6307\u6570",style:"margin-bottom: 24px",loading:a.value,bordered:!1,"body-style":{padding:0}},{default:()=>[e("div",{style:"min-height: 400px;"},[e(ie,{data:n.value},null)])]}),e(x,{loading:t.value,title:"\u56E2\u961F",bordered:!1},{default:()=>[e("div",{class:v.members},[e(B,null,O(p=l.value.map(s=>e(R,{key:s.id,span:12},{default:()=>[e("a",null,[e(T,{size:"small",src:s.avatar},null),e("span",{class:v.member},[s.name])])]})))?p:{default:()=>[p]})])]})]})]})]})])}}});export{Ye as default};

var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&n(e,t,a[t]);return e},s=(e,l)=>a(e,t(l));import{d as i}from"./index.bdcd684a.js";import{d,p,s as c,E as m,i as f,m as v,j as y}from"./vendor.6f72d5fc.js";import{C as b}from"./Card.e20ada17.js";import{F as j}from"./Form.45c314c6.js";import{R as g,C as x}from"./index.4b1d61e3.js";import{I as O}from"./Input.3d6d5d77.js";import{S as h}from"./index.71773cbd.js";import{B as w}from"./button.a72499c7.js";import{T as I}from"./index.1565c181.js";const S={xs:24,sm:24,md:12,lg:12,xl:8,xxl:8},C=d({props:s(u({},{}),{columns:{type:Object},request:{type:Function},rowKey:{type:String,default:()=>"id"},search:{type:Boolean,default:()=>!0}}),setup(e,{attrs:a}){const t=p({}),l=p(void 0),r=p([]),o=c((()=>{var a;return(null==(a=e.columns)?void 0:a.filter((e=>!e.hideInForm&&!e.customRender)))||[]})),n=c((()=>{var a;return null==(a=e.columns)?void 0:a.filter((e=>!e.hideInTable))})),d=p({total:0,current:1,pageSize:10}),C=async()=>{var a;const l=await(null==(a=e.request)?void 0:a.call(e,{current:d.value.current,pageSize:d.value.pageSize},{},i(t.value)));r.value=(null==l?void 0:l.list)||[],d.value.total=(null==l?void 0:l.total)||0},P=()=>{Object.keys(t.value).forEach((e=>t.value[e]=void 0))},z=(e,a)=>{d.value.current=e,d.value.pageSize=a,C()};return m((()=>{C()})),()=>f("div",{class:"av-pro-table"},[e.search&&f(b,null,{default:()=>[f(j,{layout:"horizontal",model:t.value,ref:l,"label-col":{span:10},"wrapper-col":{span:14}},{default:()=>[f(g,{type:"flex",justify:"start"},{default:()=>[o.value.map((e=>f(x,S,{default:()=>[f(j.Item,{label:e.title,name:e.dataIndex},{default:()=>[f(O,{value:t.value[e.dataIndex||""],"onUpdate:value":a=>t.value[e.dataIndex||""]=a},null)]})]}))),o.value.length%2==0&&f(x,S,null),f(x,v(S,{style:{textAlign:"right",marginBottom:"24px"}}),{default:()=>[f(h,null,{default:()=>[f(w,{onClick:P},{default:()=>[y("重置")]}),f(w,{type:"primary",onClick:C},{default:()=>[y("查询")]})]})]})]})]})]}),f(b,null,{default:()=>[f(I,v(a,{rowKey:e.rowKey,columns:n.value,dataSource:r.value,pagination:s(u({},d.value),{onChange:z})}),null)]})])}});export{C as P};

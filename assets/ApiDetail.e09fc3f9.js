import{P as j,a as b}from"./Content.04b38a87.js";import{c as y,d as _,e as I,u as A}from"./project.0b64762c.js";import{d as P,r as d,h as g,x as C,a as e,s as N,b as O,F as S}from"./index.e1409c94.js";import{A as h}from"./index.9b3d4d87.js";import{C as w}from"./Card.72d41c0d.js";import{F as o}from"./Form.ccdeba7a.js";import{I as u}from"./Input.db60bf9c.js";import{a as s}from"./index.b893f673.js";import{B as F}from"./button.6a459199.js";import{m as f}from"./index.ec74e710.js";import"./oauth.2cca38c9.js";import"./debounce.63695ae7.js";import"./CloseCircleOutlined.28f2dbdb.js";import"./InfoCircleOutlined.9f8a4fb5.js";import"./code.aa7872b2.js";import"./index.a46ebb6b.js";import"./Avatar.1434461f.js";import"./useBreakpoint.256f6e5f.js";import"./_Set.ed75c1de.js";import"./useSize.9fcd18e3.js";import"./Menu.fb13f539.js";import"./_setToArray.0ddff03f.js";import"./Trigger.7768cff1.js";import"./EllipsisOutlined.90a80699.js";import"./index.66957e12.js";import"./index.7b952c9e.js";import"./LeftOutlined.38c21891.js";import"./transButton.aaf2b8f0.js";import"./index.580754a0.js";import"./tabs.e87a6b5b.js";import"./Col.8566bedb.js";import"./SearchOutlined.52ce1b8b.js";import"./isArrayLikeObject.d4b6bd5e.js";import"./_baseProperty.74f89655.js";import"./toInteger.37a40d04.js";import"./ExclamationCircleFilled.9f777fc4.js";import"./CloseCircleFilled.4dc39271.js";import"./LoadingOutlined.3103cde2.js";import"./initDefaultProps.5e2544d9.js";import"./index.9563d230.js";import"./CheckOutlined.de965fe7.js";import"./wave.af64de9e.js";import"./createChainedFunction.2d5d7d53.js";function U(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!N(l)}var Ae=P({props:{id:{type:[Number],require:!1},projectId:{type:[Number],require:!1}},setup(l){const r=d({}),m=d(void 0),p=g(()=>l.id?"edit":"add"),n=d([]),c=()=>{var a;(a=m==null?void 0:m.value)==null||a.validateFields().then(()=>{p.value==="add"?(I(r.value),f.success("\u6DFB\u52A0\u6210\u529F")):p.value==="edit"&&(A(r.value),f.success("\u4FEE\u6539\u6210\u529F"))})};return C(async()=>{if(y().then(a=>{n.value=a.list}),p.value==="edit"){const a=await _({id:l.id});r.value=a}}),()=>{let a;return e(S,null,[e(j,null,{default:()=>[e(h,null,{default:()=>[l.id?"api\u8BE6\u60C5\u9875":"\u65B0\u5EFAapi"]})]}),e(b,null,{default:()=>[e(w,null,{default:()=>[e(o,{layout:"vertical",model:r.value,ref:m},{default:()=>[e(o.Item,{label:"id",name:"id"},{default:()=>[e(u,{value:r.value.id,"onUpdate:value":t=>r.value.id=t,disabled:!0},null)]}),e(o.Item,{label:"api\u63CF\u8FF0",name:"name",required:!0},{default:()=>[e(u,{value:r.value.name,"onUpdate:value":t=>r.value.name=t},null)]}),e(o.Item,{label:"\u5173\u8054\u9879\u76EE\u82F1\u6587\u540D"},{default:()=>{var t;return[e(u,{value:(t=n.value.find(i=>i.id===r.value.project_id))==null?void 0:t.code,disabled:!0},null)]}}),e(o.Item,{label:"\u5173\u8054\u9879\u76EE",name:"project_id",rules:[{type:"number"},{validator:(t,i)=>i?Promise.resolve():Promise.reject("\u8BF7\u8F93\u5165\u5173\u8054\u9879\u76EE")}]},{default:()=>[e(s,{value:r.value.project_id,"onUpdate:value":t=>r.value.project_id=t},U(a=n.value.map(t=>e(s.Option,{key:t.id,value:t.id},{default:()=>[t.name]})))?a:{default:()=>[a]})]}),e(o.Item,{label:"\u8BF7\u6C42\u8DEF\u5F84",name:"url",required:!0},{default:()=>[e(u,{value:r.value.url,"onUpdate:value":t=>r.value.url=t},null)]}),e(o.Item,{label:"mock\u6570\u636E\u7684json\u5B57\u7B26\u4E32",name:"json_str",rules:[{validator:(t,i)=>{if(!i)return Promise.reject("json\u4E32\u4E0D\u80FD\u4E3A\u7A7A");try{if(typeof JSON.parse(i)!="object")throw new Error}catch{return Promise.reject("\u8BF7\u8F93\u5165\u6B63\u786E\u7684json\u683C\u5F0F")}return Promise.resolve()}}]},{default:()=>[e(u.TextArea,{value:r.value.json_str,"onUpdate:value":t=>r.value.json_str=t,allowClear:!0,autoSize:{minRows:8}},null)]}),e(o.Item,null,{default:()=>[e(F,{type:"primary",onClick:c},{default:()=>[O("\u63D0\u4EA4")]})]})]})]})]})])}}});export{Ae as default};

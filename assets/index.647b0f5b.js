var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&n(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{B as s}from"./index.bf116e58.js";import{C as d}from"./index.bcd08af7.js";import{R as p,C as c}from"./index.f18c0985.js";import{F as f}from"./index.3bceacc2.js";import{I as m}from"./index.e7364c5a.js";import{T as v}from"./index.651a5e11.js";import{S as y}from"./index.7ada5118.js";import{d as b}from"./index.3829553f.js";import{d as j,k as x,n as g,G as O,i as h,m as w,j as I}from"./vendor.d7feebf9.js";const S={xs:24,sm:24,md:12,lg:12,xl:8,xxl:8},P=j({props:i(u({},{}),{columns:{type:Object},request:{type:Function},rowKey:{type:String,default:()=>"id"},search:{type:Boolean,default:()=>!0}}),setup(e,{attrs:a}){const t=x({}),l=x(void 0),r=x([]),o=g((()=>{var a;return(null==(a=e.columns)?void 0:a.filter((e=>!e.hideInForm&&!e.customRender)))||[]})),n=g((()=>{var a;return null==(a=e.columns)?void 0:a.filter((e=>!e.hideInTable))})),j=x({total:0,current:1,pageSize:10}),P=async()=>{var a;const l=await(null==(a=e.request)?void 0:a.call(e,{current:j.value.current,pageSize:j.value.pageSize},{},b(t.value)));r.value=(null==l?void 0:l.list)||[],j.value.total=(null==l?void 0:l.total)||0},z=()=>{Object.keys(t.value).forEach((e=>t.value[e]=void 0))},C=(e,a)=>{j.value.current=e,j.value.pageSize=a,P()};return O((()=>{P()})),()=>h("div",{class:"av-pro-table"},[e.search&&h(d,null,{default:()=>[h(f,{layout:"horizontal",model:t.value,ref:l,"label-col":{span:10},"wrapper-col":{span:14}},{default:()=>[h(p,{type:"flex",justify:"start"},{default:()=>[o.value.map((e=>h(c,S,{default:()=>[h(f.Item,{label:e.title,name:e.dataIndex},{default:()=>[h(m,{value:t.value[e.dataIndex||""],"onUpdate:value":a=>t.value[e.dataIndex||""]=a},null)]})]}))),o.value.length%2==0&&h(c,S,null),h(c,w(S,{style:{textAlign:"right",marginBottom:"24px"}}),{default:()=>[h(y,null,{default:()=>[h(s,{onClick:z},{default:()=>[I("重置")]}),h(s,{type:"primary",onClick:P},{default:()=>[I("查询")]})]})]})]})]})]}),h(d,null,{default:()=>[h(v,w(a,{rowKey:e.rowKey,columns:n.value,dataSource:r.value,pagination:i(u({},j.value),{onChange:C})}),null)]})])}});export{P};

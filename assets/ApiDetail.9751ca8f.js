import{P as e,a as t}from"./Content.f5575f33.js";import{c as a,d as r,e as i,u as l}from"./project.1e3b3675.js";import{d as o,l as s,p as d,E as u,i as n,B as m,j as p,F as j}from"./vendor.13fa0854.js";import{A as c}from"./index.ae0e6c96.js";import{C as f}from"./Card.4aabf5b7.js";import{F as v}from"./Form.c4f6de1b.js";import{I as b}from"./Input.7913cdd1.js";import{a as y}from"./index.61436ebc.js";import{B as C}from"./button.2d27e495.js";import{m as I}from"./index.fa6786fd.js";import"./oauth.e9db2a4e.js";import"./debounce.7c4b284f.js";import"./CloseCircleOutlined.d00e7753.js";import"./InfoCircleOutlined.9aac814c.js";import"./code.aa7872b2.js";import"./index.05878a6c.js";import"./index.7196d8c3.js";import"./Avatar.43776781.js";import"./useBreakpoint.8df4d842.js";import"./_Set.dfe4feb5.js";import"./useSize.ea26a3f4.js";import"./Menu.f8e3f324.js";import"./_setToArray.6911d488.js";import"./Trigger.43962c8b.js";import"./EllipsisOutlined.59e3f1df.js";import"./index.60fdcde3.js";import"./index.609eb52b.js";import"./LeftOutlined.55549e0c.js";import"./transButton.45d23284.js";import"./index.cc37a535.js";import"./tabs.b235e8bb.js";import"./Col.74b7851b.js";import"./SearchOutlined.9b6d07cd.js";import"./isArrayLikeObject.629c4221.js";import"./_baseProperty.74f89655.js";import"./toInteger.002511f8.js";import"./ExclamationCircleFilled.5fde2de7.js";import"./CloseCircleFilled.b1621eba.js";import"./LoadingOutlined.13f3bbc7.js";import"./initDefaultProps.037e10c6.js";import"./antInputDirective.dcf4b893.js";import"./index.9563d230.js";import"./CheckOutlined.9e2dab48.js";import"./wave.b2e2f908.js";import"./createChainedFunction.2d5d7d53.js";var x=o({props:{id:{type:[Number],require:!1},projectId:{type:[Number],require:!1}},setup(o){const x=s({}),O=s(void 0),_=d((()=>o.id?"edit":"add")),h=s([]),P=()=>{var e;null==(e=null==O?void 0:O.value)||e.validateFields().then((()=>{"add"===_.value?(i(x.value),I.success("添加成功")):"edit"===_.value&&(l(x.value),I.success("修改成功"))}))};return u((async()=>{if(a().then((e=>{h.value=e.list})),"edit"===_.value){const e=await r({id:o.id});x.value=e}})),()=>{let a;return n(j,null,[n(e,null,{default:()=>[n(c,null,{default:()=>[o.id?"api详情页":"新建api"]})]}),n(t,null,{default:()=>[n(f,null,{default:()=>[n(v,{layout:"vertical",model:x.value,ref:O},{default:()=>[n(v.Item,{label:"id",name:"id"},{default:()=>[n(b,{value:x.value.id,"onUpdate:value":e=>x.value.id=e,disabled:!0},null)]}),n(v.Item,{label:"api描述",name:"name",required:!0},{default:()=>[n(b,{value:x.value.name,"onUpdate:value":e=>x.value.name=e},null)]}),n(v.Item,{label:"关联项目英文名"},{default:()=>{var e;return[n(b,{value:null==(e=h.value.find((e=>e.id===x.value.project_id)))?void 0:e.code,disabled:!0},null)]}}),n(v.Item,{label:"关联项目",name:"project_id",rules:[{type:"number"},{validator:(e,t)=>t?Promise.resolve():Promise.reject("请输入关联项目")}]},{default:()=>{return[n(y,{value:x.value.project_id,"onUpdate:value":e=>x.value.project_id=e},(e=a=h.value.map((e=>n(y.Option,{key:e.id,value:e.id},{default:()=>[e.name]}))),"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!m(e)?a:{default:()=>[a]}))];var e}}),n(v.Item,{label:"请求路径",name:"url",required:!0},{default:()=>[n(b,{value:x.value.url,"onUpdate:value":e=>x.value.url=e},null)]}),n(v.Item,{label:"mock数据的json字符串",name:"json_str",rules:[{validator:(e,t)=>{if(!t)return Promise.reject("json串不能为空");try{if("object"!=typeof JSON.parse(t))throw new Error}catch(a){return Promise.reject("请输入正确的json格式")}return Promise.resolve()}}]},{default:()=>[n(b.TextArea,{value:x.value.json_str,"onUpdate:value":e=>x.value.json_str=e,allowClear:!0,autoSize:{minRows:8}},null)]}),n(v.Item,null,{default:()=>[n(C,{type:"primary",onClick:P},{default:()=>[p("提交")]})]})]})]})]})])}}});export{x as default};

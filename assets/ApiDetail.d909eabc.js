import{P as e,a}from"./Content.0d71ca3d.js";import{B as t}from"./index.bf116e58.js";import{C as r}from"./index.bcd08af7.js";import{F as i}from"./index.3bceacc2.js";import{I as l}from"./index.e7364c5a.js";import{a as o}from"./index.02e8fda9.js";import{a as d}from"./index.eb409cea.js";import{A as s}from"./index.da5a312a.js";import{c as u,d as n,e as m,u as p}from"./project.397ec5f8.js";import{d as c,k as j,n as f,G as v,i as b,y as x,j as y,F as C}from"./vendor.d7feebf9.js";import"./wave.ccb9ab60.js";import"./Event.c36f22c9.js";import"./raf.edade736.js";import"./toNumber.5775a339.js";import"./LoadingOutlined.926f7c5c.js";import"./index.de35a10b.js";import"./debounce.284ffcec.js";import"./index.f18c0985.js";import"./Col.b85f2d2f.js";import"./identity.d1328b1c.js";import"./_Uint8Array.b94435ea.js";import"./toInteger.3f41bba0.js";import"./get.b17584b8.js";import"./_baseProperty.74f89655.js";import"./ExclamationCircleFilled.d25e78d8.js";import"./CloseCircleFilled.411ac2a4.js";import"./initDefaultProps.f4792837.js";import"./SearchOutlined.698c58ba.js";import"./index.9563d230.js";import"./isMobile.69f1a0da.js";import"./createChainedFunction.2d5d7d53.js";import"./Trigger.c296f716.js";import"./CheckOutlined.dd11a829.js";import"./index.689c294d.js";import"./dropdown.a4bd35d8.js";import"./EllipsisOutlined.aff4ca99.js";import"./index.6e873003.js";import"./colors.ce005b5d.js";import"./index.396e6931.js";import"./transButton.cda24ec6.js";import"./oauth.a7c896ab.js";import"./CloseCircleOutlined.17243ee6.js";import"./InfoCircleOutlined.6283f567.js";import"./code.aa7872b2.js";import"./index.ce4fa7ca.js";var I=c({props:{id:{type:[Number],require:!1},projectId:{type:[Number],require:!1}},setup(c){const I=j({}),O=j(void 0),_=f((()=>c.id?"edit":"add")),h=j([]),P=()=>{var e;null==(e=null==O?void 0:O.value)||e.validateFields().then((()=>{"add"===_.value?(m(I.value),o.success("添加成功")):"edit"===_.value&&(p(I.value),o.success("修改成功"))}))};return v((async()=>{if(u().then((e=>{h.value=e.list})),"edit"===_.value){const e=await n({id:c.id});I.value=e}})),()=>{let o;return b(C,null,[b(e,null,{default:()=>[b(s,null,{default:()=>[c.id?"api详情页":"新建api"]})]}),b(a,null,{default:()=>[b(r,null,{default:()=>[b(i,{layout:"vertical",model:I.value,ref:O},{default:()=>[b(i.Item,{label:"id",name:"id"},{default:()=>[b(l,{value:I.value.id,"onUpdate:value":e=>I.value.id=e,disabled:!0},null)]}),b(i.Item,{label:"api描述",name:"name",required:!0},{default:()=>[b(l,{value:I.value.name,"onUpdate:value":e=>I.value.name=e},null)]}),b(i.Item,{label:"关联项目英文名"},{default:()=>{var e;return[b(l,{value:null==(e=h.value.find((e=>e.id===I.value.project_id)))?void 0:e.code,disabled:!0},null)]}}),b(i.Item,{label:"关联项目",name:"project_id",rules:[{type:"number"},{validator:(e,a)=>a?Promise.resolve():Promise.reject("请输入关联项目")}]},{default:()=>{return[b(d,{value:I.value.project_id,"onUpdate:value":e=>I.value.project_id=e},(e=o=h.value.map((e=>b(d.Option,{key:e.id,value:e.id},{default:()=>[e.name]}))),"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!x(e)?o:{default:()=>[o]}))];var e}}),b(i.Item,{label:"请求路径",name:"url",required:!0},{default:()=>[b(l,{value:I.value.url,"onUpdate:value":e=>I.value.url=e},null)]}),b(i.Item,{label:"mock数据的json字符串",name:"json_str",rules:[{validator:(e,a)=>{if(!a)return Promise.reject("json串不能为空");try{if("object"!=typeof JSON.parse(a))throw new Error}catch(t){return Promise.reject("请输入正确的json格式")}return Promise.resolve()}}]},{default:()=>[b(l.TextArea,{value:I.value.json_str,"onUpdate:value":e=>I.value.json_str=e,allowClear:!0,autoSize:{minRows:8}},null)]}),b(i.Item,null,{default:()=>[b(t,{type:"primary",onClick:P},{default:()=>[y("提交")]})]})]})]})]})])}}});export default I;

import{P as a,t as e,k as t,H as n,d as s,j as r,_ as o,b as c,N as i}from"./debounce.7c4b284f.js";import{u as l}from"./useBreakpoint.8df4d842.js";import{R as u}from"./_Set.dfe4feb5.js";import{u as f}from"./useSize.ea26a3f4.js";import{d as v,l as p,p as d,w as g,E as m,z as b,i as h}from"./vendor.13fa0854.js";var x={prefixCls:a.string,shape:a.oneOf(e("circle","square")).def("circle"),size:{type:[Number,String,Object],default:function(){return"default"}},src:a.string,srcset:a.string,icon:a.VNodeChild,alt:a.string,gap:a.number,draggable:a.bool,loadError:{type:Function}},y=v({name:"AAvatar",inheritAttrs:!1,props:x,slots:["icon"],setup:function(a,e){var v=e.slots,x=e.attrs,y=p(!0),z=p(!1),j=p(1),S=p(null),A=p(null),E=t("avatar",a).prefixCls,H=f(),k=l(),w=d((function(){if("object"===c(a.size)){var e=i.find((function(a){return k.value[a]}));return a.size[e]}})),C=function(){if(S.value&&A.value){var e=S.value.offsetWidth,t=A.value.offsetWidth;if(0!==e&&0!==t){var n=a.gap,s=void 0===n?4:n;2*s<t&&(j.value=t-2*s<e?(t-2*s)/e:1)}}},N=function(){var e=a.loadError;!1!==(null==e?void 0:e())&&(y.value=!1)};return g((function(){return a.src}),(function(){b((function(){y.value=!0,j.value=1}))})),g((function(){return a.gap}),(function(){b((function(){C()}))})),m((function(){b((function(){C(),z.value=!0}))})),function(){var e,t,c,i,l=a.shape,f=a.size,p=a.src,d=a.alt,g=a.srcset,m=a.draggable,b=n(v,a,"icon"),k=E.value,W="default"===f?H.value:f,O=(s(e={},"".concat(x.class),!!x.class),s(e,k,!0),s(e,"".concat(k,"-lg"),"large"===W),s(e,"".concat(k,"-sm"),"small"===W),s(e,"".concat(k,"-").concat(l),l),s(e,"".concat(k,"-image"),p&&y.value),s(e,"".concat(k,"-icon"),b),e),R="number"==typeof W?{width:"".concat(W,"px"),height:"".concat(W,"px"),lineHeight:"".concat(W,"px"),fontSize:b?"".concat(W/2,"px"):"18px"}:{},T=null===(t=v.default)||void 0===t?void 0:t.call(v);if(p&&y.value)c=h("img",{draggable:m,src:p,srcset:g,onError:N,alt:d},null);else if(b)c=b;else if(z.value||1!==j.value){var _="scale(".concat(j.value,") translateX(-50%)"),q={msTransform:_,WebkitTransform:_,transform:_},B="number"==typeof W?{lineHeight:"".concat(W,"px")}:{};c=h(u,{onResize:C},{default:function(){return[h("span",{class:"".concat(k,"-string"),ref:S,style:o(o({},B),q)},[T])]}})}else c=h("span",{class:"".concat(k,"-string"),ref:S,style:{opacity:0}},[T]);return h("span",r(r({},x),{},{ref:A,class:O,style:o(o(o({},R),(i=!!b,w.value?{width:"".concat(w.value,"px"),height:"".concat(w.value,"px"),lineHeight:"".concat(w.value,"px"),fontSize:"".concat(i?w.value/2:18,"px")}:{})),x.style)}),[c])}}});export{y as A,x as a};

import{P as e,a}from"./Content.f115bc1c.js";import{c as t,d as r,e as i,u as l}from"./project.71a1cedd.js";import{d as o,p as d,s,E as u,i as n,C as m,j as p,F as j}from"./vendor.6f72d5fc.js";import{A as c}from"./index.d9397ec7.js";import{C as f}from"./Card.e20ada17.js";import{F as v}from"./Form.45c314c6.js";import{I as b}from"./Input.3d6d5d77.js";import{a as y}from"./index.e95576fb.js";import{B as C}from"./button.a72499c7.js";import{a as I}from"./index.e7a9ca42.js";import"./oauth.ea353c2d.js";import"./debounce.53224f53.js";import"./CloseCircleOutlined.8bf885ad.js";import"./InfoCircleOutlined.6e6a88c8.js";import"./code.aa7872b2.js";import"./index.1c60d266.js";import"./index.570620f8.js";import"./Avatar.58f4cd7b.js";import"./useBreakpoint.69150a26.js";import"./_Set.00542764.js";import"./useSize.a8cdded3.js";import"./Menu.22711739.js";import"./_setToArray.9043b94f.js";import"./Trigger.453d690e.js";import"./EllipsisOutlined.78e82d0a.js";import"./index.b2c4bfdc.js";import"./index.79ea523d.js";import"./LeftOutlined.de4386ac.js";import"./transButton.789181f2.js";import"./index.4b1d61e3.js";import"./tabs.d659d406.js";import"./Col.d7314daf.js";import"./SearchOutlined.911383eb.js";import"./isArrayLikeObject.f2926185.js";import"./_baseProperty.74f89655.js";import"./toInteger.358572ae.js";import"./ExclamationCircleFilled.e6098fac.js";import"./CloseCircleFilled.0d2049b6.js";import"./LoadingOutlined.fc56fea6.js";import"./initDefaultProps.e3db526a.js";import"./antInputDirective.093c4552.js";import"./index.9563d230.js";import"./CheckOutlined.ea314fd5.js";import"./wave.fd760b9f.js";import"./createChainedFunction.2d5d7d53.js";var x=o({props:{id:{type:[Number],require:!1},projectId:{type:[Number],require:!1}},setup(o){const x=d({}),O=d(void 0),_=s((()=>o.id?"edit":"add")),h=d([]),P=()=>{var e;null==(e=null==O?void 0:O.value)||e.validateFields().then((()=>{"add"===_.value?(i(x.value),I.success("添加成功")):"edit"===_.value&&(l(x.value),I.success("修改成功"))}))};return u((async()=>{if(t().then((e=>{h.value=e.list})),"edit"===_.value){const e=await r({id:o.id});x.value=e}})),()=>{let t;return n(j,null,[n(e,null,{default:()=>[n(c,null,{default:()=>[o.id?"api详情页":"新建api"]})]}),n(a,null,{default:()=>[n(f,null,{default:()=>[n(v,{layout:"vertical",model:x.value,ref:O},{default:()=>[n(v.Item,{label:"id",name:"id"},{default:()=>[n(b,{value:x.value.id,"onUpdate:value":e=>x.value.id=e,disabled:!0},null)]}),n(v.Item,{label:"api描述",name:"name",required:!0},{default:()=>[n(b,{value:x.value.name,"onUpdate:value":e=>x.value.name=e},null)]}),n(v.Item,{label:"关联项目英文名"},{default:()=>{var e;return[n(b,{value:null==(e=h.value.find((e=>e.id===x.value.project_id)))?void 0:e.code,disabled:!0},null)]}}),n(v.Item,{label:"关联项目",name:"project_id",rules:[{type:"number"},{validator:(e,a)=>a?Promise.resolve():Promise.reject("请输入关联项目")}]},{default:()=>{return[n(y,{value:x.value.project_id,"onUpdate:value":e=>x.value.project_id=e},(e=t=h.value.map((e=>n(y.Option,{key:e.id,value:e.id},{default:()=>[e.name]}))),"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!m(e)?t:{default:()=>[t]}))];var e}}),n(v.Item,{label:"请求路径",name:"url",required:!0},{default:()=>[n(b,{value:x.value.url,"onUpdate:value":e=>x.value.url=e},null)]}),n(v.Item,{label:"mock数据的json字符串",name:"json_str",rules:[{validator:(e,a)=>{if(!a)return Promise.reject("json串不能为空");try{if("object"!=typeof JSON.parse(a))throw new Error}catch(t){return Promise.reject("请输入正确的json格式")}return Promise.resolve()}}]},{default:()=>[n(b.TextArea,{value:x.value.json_str,"onUpdate:value":e=>x.value.json_str=e,allowClear:!0,autoSize:{minRows:8}},null)]}),n(v.Item,null,{default:()=>[n(C,{type:"primary",onClick:P},{default:()=>[p("提交")]})]})]})]})]})])}}});export default x;

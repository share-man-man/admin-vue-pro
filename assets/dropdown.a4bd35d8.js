import{B as e,P as t,l as i,n,e as r,p as o,m as s,f as a,t as l,c as p,d as f,u,i as c}from"./toNumber.5775a339.js";import{T as g}from"./Trigger.c296f716.js";import{d as h,T as d,i as m,s as v,x as b,q as y}from"./vendor.d7feebf9.js";import{b as C,B as O,a as P}from"./index.bf116e58.js";import{R as j}from"./debounce.284ffcec.js";import{E as w}from"./EllipsisOutlined.aff4ca99.js";var x={adjustX:1,adjustY:1},V=[0,0],N={topLeft:{points:["bl","tl"],overflow:x,offset:[0,-4],targetOffset:V},topCenter:{points:["bc","tc"],overflow:x,offset:[0,-4],targetOffset:V},topRight:{points:["br","tr"],overflow:x,offset:[0,-4],targetOffset:V},bottomLeft:{points:["tl","bl"],overflow:x,offset:[0,4],targetOffset:V},bottomCenter:{points:["tc","bc"],overflow:x,offset:[0,4],targetOffset:V},bottomRight:{points:["tr","br"],overflow:x,offset:[0,4],targetOffset:V}};function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var A=h({mixins:[e],props:{minOverlayWidthMatchTrigger:t.looseBool,prefixCls:t.string.def("rc-dropdown"),transitionName:t.string,overlayClassName:t.string.def(""),openClassName:t.string,animation:t.any,align:t.object,overlayStyle:t.object.def((function(){return{}})),placement:t.string.def("bottomLeft"),overlay:t.any,trigger:t.array.def(["hover"]),alignPoint:t.looseBool,showAction:t.array.def([]),hideAction:t.array.def([]),getPopupContainer:t.func,visible:t.looseBool,defaultVisible:t.looseBool.def(!1),mouseEnterDelay:t.number.def(.15),mouseLeaveDelay:t.number.def(.1)},data:function(){var e=this.defaultVisible;return i(this,"visible")&&(e=this.visible),{sVisible:e}},watch:{visible:function(e){void 0!==e&&this.setState({sVisible:e})}},methods:{onClick:function(e){var t=this.getOverlayElement().props;i(this,"visible")||this.setState({sVisible:!1}),this.__emit("overlayClick",e),t.onClick&&t.onClick(e)},onVisibleChange:function(e){i(this,"visible")||this.setState({sVisible:e}),this.__emit("update:visible",e),this.__emit("visibleChange",e)},getMinOverlayWidthMatchTrigger:function(){var e=n(this),t=e.minOverlayWidthMatchTrigger,i=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!i},getOverlayElement:function(){var e=r(this,"overlay");return Array.isArray(e)?e[0]:e},getMenuElement:function(){var e=this,t=this.onClick,i=this.prefixCls,n=this.getOverlayElement(),r={prefixCls:"".concat(i,"-menu"),getPopupContainer:function(){return e.getPopupDomNode()},onClick:t};return n&&n.type===d&&delete r.prefixCls,o(n,r)},getMenuElementOrLambda:function(){return"function"==typeof(this.overlay||this.$slots.overlay)?this.getMenuElement:this.getMenuElement()},getPopupDomNode:function(){return this.triggerRef.getPopupDomNode()},getOpenClassName:function(){var e=this.$props,t=e.openClassName,i=e.prefixCls;return void 0!==t?t:"".concat(i,"-open")},afterVisibleChange:function(e){if(e&&this.getMinOverlayWidthMatchTrigger()){var t=this.getPopupDomNode(),i=s(this);i&&t&&i.offsetWidth>t.offsetWidth&&(t.style.minWidth="".concat(i.offsetWidth,"px"),this.triggerRef&&this.triggerRef._component&&this.triggerRef._component.alignInstance&&this.triggerRef._component.alignInstance.forceAlign())}},renderChildren:function(){var e=a(this);return this.sVisible&&e?o(e[0],{class:this.getOpenClassName()},!1):e},saveTrigger:function(e){this.triggerRef=e}},render:function(){var e=this,t=this.$props,i=t.prefixCls,n=t.transitionName,r=t.animation,o=t.align,s=t.placement,a=t.getPopupContainer,l=t.showAction,p=t.hideAction,f=t.overlayClassName,u=t.overlayStyle,c=t.trigger,h=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(t,["prefixCls","transitionName","animation","align","placement","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","trigger"]),d=p;d||-1===c.indexOf("contextmenu")||(d=["click"]);var v=R(R({},h),{prefixCls:i,popupClassName:f,popupStyle:u,builtinPlacements:N,action:c,showAction:l,hideAction:d||[],popupPlacement:s,popupAlign:o,popupTransitionName:n,popupAnimation:r,popupVisible:this.sVisible,afterPopupVisibleChange:this.afterVisibleChange,getPopupContainer:a,onPopupVisibleChange:this.onVisibleChange,popup:this.getMenuElementOrLambda(),ref:this.saveTrigger});return m(g,v,{default:function(){return[e.renderChildren()]}})}}),T=function(){return{trigger:{type:Array,default:function(){return["hover"]}},overlay:t.any,visible:t.looseBool,disabled:t.looseBool,align:t.object,getPopupContainer:t.func,prefixCls:t.string,transitionName:t.string,placement:t.oneOf(l("topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight")),overlayClassName:t.string,overlayStyle:t.style,forceRender:t.looseBool,mouseEnterDelay:t.number,mouseLeaveDelay:t.number,openClassName:t.string,minOverlayWidthMatchTrigger:t.looseBool}};function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){k(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function k(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var B=C(),M=T(),$=O.Group,L=h({name:"ADropdownButton",inheritAttrs:!1,props:S(S(S({},P),M),{type:t.oneOf(l("primary","ghost","dashed","danger","default")).def("default"),size:t.oneOf(l("small","large","default")).def("default"),htmlType:B.htmlType,href:t.string,disabled:t.looseBool,prefixCls:t.string,placement:M.placement.def("bottomRight"),icon:t.any,title:t.string,onClick:t.func,onVisibleChange:t.func,"onUpdate:visible":t.func}),emits:["click","visibleChange","update:visible"],setup:function(){return{configProvider:v("configProvider",f),popupRef:null}},created:function(){b("savePopupRef",this.savePopupRef)},methods:{savePopupRef:function(e){this.popupRef=e},handleClick:function(e){this.$emit("click",e)},handleVisibleChange:function(e){this.$emit("update:visible",e),this.$emit("visibleChange",e)}},render:function(){var e=this,t=S(S({},this.$props),this.$attrs),n=t.type,o=t.disabled;t.onClick;var s=t.htmlType,l=t.class,f=t.prefixCls;t.overlay;var u=t.trigger,c=t.align,g=t.visible;t.onVisibleChange;var h=t.placement,d=t.getPopupContainer,v=t.href,b=t.title,y=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(t,["type","disabled","onClick","htmlType","class","prefixCls","overlay","trigger","align","visible","onVisibleChange","placement","getPopupContainer","href","title"]),C=r(this,"icon")||m(w,null,null),P=this.configProvider.getPopupContainer,j=(0,this.configProvider.getPrefixCls)("dropdown-button",f),x={align:c,disabled:o,trigger:o?[]:u,placement:h,getPopupContainer:d||P,onVisibleChange:this.handleVisibleChange};i(this,"visible")&&(x.visible=g);var V=S(S({},y),{class:p(j,l)});return m($,V,{default:function(){return[m(O,{type:n,disabled:o,onClick:e.handleClick,htmlType:s,href:v,title:b},{default:function(){return[a(e)]}}),m(I,E(E({},x),{},{overlay:r(e,"overlay")}),{default:function(){return[m(O,{type:n},{default:function(){return[C]}})]}})]}})}});function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var _=T(),I=h({name:"ADropdown",inheritAttrs:!1,props:W(W({},_),{prefixCls:t.string,mouseEnterDelay:t.number.def(.15),mouseLeaveDelay:t.number.def(.1),placement:_.placement.def("bottomLeft"),onVisibleChange:t.func,"onUpdate:visible":t.func}),emits:["visibleChange","update:visible"],setup:function(){return{configProvider:v("configProvider",f),popupRef:null}},created:function(){b("savePopupRef",this.savePopupRef)},methods:{savePopupRef:function(e){this.popupRef=e},getTransitionName:function(){var e=this.$props,t=e.placement,i=void 0===t?"":t,n=e.transitionName;return void 0!==n?n:i.indexOf("top")>=0?"slide-down":"slide-up"},renderOverlay:function(e){var t=r(this,"overlay"),i=Array.isArray(t)?t[0]:t,n=i&&u(i)||{},o=n.selectable,s=void 0!==o&&o,a=n.focusable,l=void 0===a||a,p=m("span",{class:"".concat(e,"-menu-submenu-arrow")},[m(j,{class:"".concat(e,"-menu-submenu-arrow-icon")},null)]);return c(i)?y(i,{mode:"vertical",selectable:s,focusable:l,expandIcon:p}):t},handleVisibleChange:function(e){this.$emit("update:visible",e),this.$emit("visibleChange",e)}},render:function(){var e,t,i=n(this),r=i.prefixCls,s=i.trigger,l=i.disabled,f=i.getPopupContainer,u=this.configProvider.getPopupContainer,c=(0,this.configProvider.getPrefixCls)("dropdown",r),g=a(this)[0],h=o(g,{class:p(null===(e=null==g?void 0:g.props)||void 0===e?void 0:e.class,"".concat(c,"-trigger")),disabled:l}),d=l?[]:s;d&&-1!==d.indexOf("contextmenu")&&(t=!0);var v=W(W(W({alignPoint:t},i),this.$attrs),{prefixCls:c,getPopupContainer:f||u,transitionName:this.getTransitionName(),trigger:d,overlay:this.renderOverlay(c),onVisibleChange:this.handleVisibleChange});return m(A,v,{default:function(){return[h]}})}});I.Button=L;export{I as D,L as a};

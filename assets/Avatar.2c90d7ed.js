import{P as i,t as X,k as D,H as G,d as l,j as P,_ as d,b as J,N as K}from"./debounce.b47df357.js";import{u as Q}from"./useBreakpoint.0c1d4844.js";import{R as U}from"./_Set.b615e6a2.js";import{u as Y}from"./useSize.10ad6ac6.js";import{d as Z,l as g,p as $,w as k,E as ee,z as _,i as m}from"./vendor.0aef34f5.js";var ae={prefixCls:i.string,shape:i.oneOf(X("circle","square")).def("circle"),size:{type:[Number,String,Object],default:function(){return"default"}},src:i.string,srcset:i.string,icon:i.VNodeChild,alt:i.string,gap:i.number,draggable:i.bool,loadError:{type:Function}},re=Z({name:"AAvatar",inheritAttrs:!1,props:ae,slots:["icon"],setup:function(a,C){var b=C.slots,p=C.attrs,h=g(!0),E=g(!1),z=g(1),S=g(null),x=g(null),R=D("avatar",a),N=R.prefixCls,T=Y(),W=Q(),o=$(function(){if(J(a.size)==="object"){var r=K.find(function(t){return W.value[t]}),e=a.size[r];return e}}),w=function(e){return o.value?{width:"".concat(o.value,"px"),height:"".concat(o.value,"px"),lineHeight:"".concat(o.value,"px"),fontSize:"".concat(e?o.value/2:18,"px")}:{}},y=function(){if(!(!S.value||!x.value)){var e=S.value.offsetWidth,t=x.value.offsetWidth;if(e!==0&&t!==0){var u=a.gap,c=u===void 0?4:u;c*2<t&&(z.value=t-c*2<e?(t-c*2)/e:1)}}},H=function(){var e=a.loadError,t=e==null?void 0:e();t!==!1&&(h.value=!1)};return k(function(){return a.src},function(){_(function(){h.value=!0,z.value=1})}),k(function(){return a.gap},function(){_(function(){y()})}),ee(function(){_(function(){y(),E.value=!0})}),function(){var r,e,t=a.shape,u=a.size,c=a.src,B=a.alt,O=a.srcset,F=a.draggable,v=G(b,a,"icon"),s=N.value,n=u==="default"?T.value:u,L=(r={},l(r,"".concat(p.class),!!p.class),l(r,s,!0),l(r,"".concat(s,"-lg"),n==="large"),l(r,"".concat(s,"-sm"),n==="small"),l(r,"".concat(s,"-").concat(t),t),l(r,"".concat(s,"-image"),c&&h.value),l(r,"".concat(s,"-icon"),v),r),M=typeof n=="number"?{width:"".concat(n,"px"),height:"".concat(n,"px"),lineHeight:"".concat(n,"px"),fontSize:v?"".concat(n/2,"px"):"18px"}:{},A=(e=b.default)===null||e===void 0?void 0:e.call(b),f;if(c&&h.value)f=m("img",{draggable:F,src:c,srcset:O,onError:H,alt:B},null);else if(v)f=v;else if(E.value||z.value!==1){var j="scale(".concat(z.value,") translateX(-50%)"),V={msTransform:j,WebkitTransform:j,transform:j},q=typeof n=="number"?{lineHeight:"".concat(n,"px")}:{};f=m(U,{onResize:y},{default:function(){return[m("span",{class:"".concat(s,"-string"),ref:S,style:d(d({},q),V)},[A])]}})}else f=m("span",{class:"".concat(s,"-string"),ref:S,style:{opacity:0}},[A]);return m("span",P(P({},p),{},{ref:x,class:L,style:d(d(d({},M),w(!!v)),p.style)}),[f])}}}),oe=re;export{oe as A,ae as a};

import{w as t}from"./_Set.ca07d085.js";import{F as n,Q as i}from"./debounce.67102cb7.js";import{d as e,s as a,z as o}from"./vendor.1bd2b8e6.js";var r={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},s={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},d=[],c=[];function m(t,n,i){t.addEventListener(n,i,!1)}function f(t,n,i){t.removeEventListener(n,i,!1)}"undefined"!=typeof window&&"undefined"!=typeof document&&function(){var t=document.createElement("div").style;function n(n,i){for(var e in n)if(n.hasOwnProperty(e)){var a=n[e];for(var o in a)if(o in t){i.push(a[o]);break}}}"AnimationEvent"in window||(delete r.animationstart.animation,delete s.animationend.animation),"TransitionEvent"in window||(delete r.transitionstart.transition,delete s.transitionend.transition),n(r,d),n(s,c)}();var u,l=function(t,n){0!==d.length?d.forEach((function(i){m(t,i,n)})):window.setTimeout(n,0)},h=function(t,n){0!==d.length&&d.forEach((function(i){f(t,i,n)}))},v=function(t,n){0!==c.length?c.forEach((function(i){m(t,i,n)})):window.setTimeout(n,0)},E=function(t,n){0!==c.length&&c.forEach((function(i){f(t,i,n)}))};function b(t){return!t||null===t.offsetParent}var p=e({name:"Wave",props:["insertExtraNode"],setup:function(){return{configProvider:a("configProvider",n)}},mounted:function(){var t=this;o((function(){var n=i(t);1===n.nodeType&&(t.instance=t.bindAnimationEvent(n))}))},beforeUnmount:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId)},methods:{onClick:function(t,n){if(!(!t||b(t)||t.className.indexOf("-leave")>=0)){var i=this.$props.insertExtraNode;this.extraNode=document.createElement("div");var e=this.extraNode;e.className="ant-click-animating-node";var a,o=this.getAttributeName();t.removeAttribute(o),t.setAttribute(o,"true"),u=u||document.createElement("style"),!n||"#ffffff"===n||"rgb(255, 255, 255)"===n||(a=(n||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/))&&a[1]&&a[2]&&a[3]&&a[1]===a[2]&&a[2]===a[3]||/rgba\(\d*, \d*, \d*, 0\)/.test(n)||"transparent"===n||(this.csp&&this.csp.nonce&&(u.nonce=this.csp.nonce),e.style.borderColor=n,u.innerHTML="\n        [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n          --antd-wave-shadow-color: ".concat(n,";\n        }"),document.body.contains(u)||document.body.appendChild(u)),i&&t.appendChild(e),l(t,this.onTransitionStart),v(t,this.onTransitionEnd)}},onTransitionStart:function(t){if(!this._.isUnmounted){var n=i(this);t&&t.target===n&&(this.animationStart||this.resetEffect(n))}},onTransitionEnd:function(t){t&&"fadeEffect"===t.animationName&&this.resetEffect(t.target)},getAttributeName:function(){return this.$props.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"},bindAnimationEvent:function(n){var i=this;if(n&&n.getAttribute&&!n.getAttribute("disabled")&&!(n.className.indexOf("disabled")>=0)){var e=function(e){if("INPUT"!==e.target.tagName&&!b(e.target)){i.resetEffect(n);var a=getComputedStyle(n).getPropertyValue("border-top-color")||getComputedStyle(n).getPropertyValue("border-color")||getComputedStyle(n).getPropertyValue("background-color");i.clickWaveTimeoutId=window.setTimeout((function(){return i.onClick(n,a)}),0),t.cancel(i.animationStartId),i.animationStart=!0,i.animationStartId=t((function(){i.animationStart=!1}),10)}};return n.addEventListener("click",e,!0),{cancel:function(){n.removeEventListener("click",e,!0)}}}},resetEffect:function(t){if(t&&t!==this.extraNode&&t instanceof Element){var n=this.$props.insertExtraNode,i=this.getAttributeName();t.setAttribute(i,"false"),u&&(u.innerHTML=""),n&&this.extraNode&&t.contains(this.extraNode)&&t.removeChild(this.extraNode),h(t,this.onTransitionStart),E(t,this.onTransitionEnd)}}},render:function(){var t,n,i=this.configProvider.csp;return i&&(this.csp=i),null===(n=(t=this.$slots).default)||void 0===n?void 0:n.call(t)[0]}});export{p as W};

var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&n(e,t,a[t]);return e},s=(e,l)=>a(e,t(l));import{d as i}from"./index.5a21e60d.js";import{d,l as p,p as c,E as f,i as m,m as v,j as y}from"./vendor.13fa0854.js";import{C as b}from"./Card.4aabf5b7.js";import{F as j}from"./Form.c4f6de1b.js";import{R as g,C as x}from"./index.cc37a535.js";import{I as O}from"./Input.7913cdd1.js";import{S as h}from"./index.80017543.js";import{B as w}from"./button.2d27e495.js";import{T as I}from"./index.fb53a198.js";const S={xs:24,sm:24,md:12,lg:12,xl:8,xxl:8};var C=d({props:s(u({},{}),{columns:{type:Object},request:{type:Function},rowKey:{type:String,default:()=>"id"},search:{type:Boolean,default:()=>!0}}),setup(e,{attrs:a}){const t=p({}),l=p(void 0),r=p([]),o=c((()=>{var a;return(null==(a=e.columns)?void 0:a.filter((e=>!e.hideInForm&&!e.customRender)))||[]})),n=c((()=>{var a;return null==(a=e.columns)?void 0:a.filter((e=>!e.hideInTable))})),d=p({total:0,current:1,pageSize:10}),C=async()=>{var a;const l=await(null==(a=e.request)?void 0:a.call(e,{current:d.value.current,pageSize:d.value.pageSize},{},i(t.value)));r.value=(null==l?void 0:l.list)||[],d.value.total=(null==l?void 0:l.total)||0},P=()=>{Object.keys(t.value).forEach((e=>t.value[e]=void 0))},z=(e,a)=>{d.value.current=e,d.value.pageSize=a,C()};return f((()=>{C()})),()=>m("div",{class:"av-pro-table"},[e.search&&m(b,null,{default:()=>[m(j,{layout:"horizontal",model:t.value,ref:l,"label-col":{span:10},"wrapper-col":{span:14}},{default:()=>[m(g,{type:"flex",justify:"start"},{default:()=>[o.value.map((e=>m(x,S,{default:()=>[m(j.Item,{label:e.title,name:e.dataIndex},{default:()=>[m(O,{value:t.value[e.dataIndex||""],"onUpdate:value":a=>t.value[e.dataIndex||""]=a},null)]})]}))),o.value.length%2==0&&m(x,S,null),m(x,v(S,{style:{textAlign:"right",marginBottom:"24px"}}),{default:()=>[m(h,null,{default:()=>[m(w,{onClick:P},{default:()=>[y("重置")]}),m(w,{type:"primary",onClick:C},{default:()=>[y("查询")]})]})]})]})]})]}),m(b,null,{default:()=>[m(I,v(a,{rowKey:e.rowKey,columns:n.value,dataSource:r.value,pagination:s(u({},d.value),{onChange:z})}),null)]})])}});export{C as P};
